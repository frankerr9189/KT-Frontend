{"ast":null,"code":"var _jsxFileName = \"/Users/KerrFamily/Desktop/FoodApp/src/user/ProductUpdateWinDialog.js\";\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { DashLabel } from './dashlinkhelper';\nimport { seaBlue } from '../Styles/colors';\nimport { Title } from '../Styles/title';\nimport { isAuthenticated } from '../auth';\nimport { Route, Link, Redirect } from 'react-router-dom';\nimport { getProduct, getCategories, updateProduct } from '../admin/apiAdmin';\nconst CDialog = styled.div`\nwidth: 500px;\nbackground-color: white;\nposition: fixed;\ntop: 80px;\nz-index: 5;\nmax-height: calc(100% - 100px);\nleft: calc(50% - 250px);\ndisplay: flex;\nflex-direction: column;\n`;\nconst CDialogShadow = styled.div`\n    position: fixed;\n    height: 100%;\n    width: 100%;\n    top: 0px;\n    background-color: black;\n    opacity: 0.7;\n    z-index: 4;\n`;\nconst CDialogContent = styled.div`\noverflow: auto; \nmin-height: 200px;\npadding: 0px 40px;\npadding-bottom: 80px;\n`;\nexport const ConfirmButton = styled(Title)`\nmargin: 10px;\ncolor: white;\nheight: 20px;\nborder-radius: 5px;\npadding: 10px;\ntext-align: center;\nwidth: 200px;\ncursor: pointer;\nbackground-color: ${seaBlue};\n${({\n  disabled\n}) => disabled && `\nopacity: .5;\nbackground-color: grey;\npointer-events: none;\n`}\n`;\nconst CDialogFooter = styled.div`\nbox-shadow: 0px -2px 20px 0px grey;\nheight: 60px;\ndisplay: flex;\njustify-content: center;\n`;\nconst CDashBanner = styled.div`\nmin-height: 200px;\nmargin-bottom: 20px;\nbackground-image: url(\"img/shark.jpeg\");\nbackground-position: center;\nbackground-size: cover;\n`;\nconst CDashBannerLabel = styled(DashLabel)`\n    top: 90px;\n    font-size: 30px;\n    padding: 5px 40px;\n`;\nexport function ProdUpdateWinDialog({\n  productUpdateWin,\n  setProductUpdateWin\n}) {\n  const {\n    user,\n    token\n  } = isAuthenticated();\n  const [categories, setCategories] = useState([]);\n  const [values, setValues] = useState({\n    name: '',\n    description: '',\n    price: '',\n    categories: [],\n    category: '',\n    shipping: '',\n    quantity: '',\n    photo: '',\n    loading: false,\n    error: '',\n    createdProduct: '',\n    redirectedToProfile: false,\n    formData: ''\n  });\n  const {\n    name,\n    description,\n    price,\n    //categories,\n    category,\n    shipping,\n    quantity,\n    loading,\n    error,\n    createdProduct,\n    redirectedToProfile,\n    formData\n  } = values;\n\n  const init = productId => {\n    getProduct(productId).then(data => {\n      if (data.error) {\n        setValues({ ...values,\n          error: data.error\n        });\n      } else {\n        //populate the state and load categories\n        setValues({ ...values,\n          name: data.name,\n          description: data.description,\n          price: data.price,\n          category: data.category._id,\n          shipping: data.shipping,\n          quantity: data.quantity,\n          formData: new FormData()\n        });\n        initCategories();\n      }\n    });\n  }; //load categories and set form data\n\n\n  const initCategories = () => {\n    getCategories().then(data => {\n      if (data.error) {\n        setValues({ ...values,\n          error: data.error\n        });\n      } else {\n        setCategories(data);\n      }\n    });\n  };\n\n  useEffect(() => {\n    init(match.params.productId);\n  }, []);\n\n  const handleChange = name => event => {\n    const value = name === 'photo' ? event.target.files[0] : event.target.value;\n    formData.set(name, value);\n    setValues({ ...values,\n      [name]: value\n    });\n  };\n\n  const clickSubmit = event => {\n    event.preventDefault();\n    setValues({ ...values,\n      error: '',\n      loading: true\n    });\n    updateProduct(match.params.productId, user._id, token, formData).then(data => {\n      if (data.error) {\n        setValues({ ...values,\n          error: data.error\n        });\n      } else {\n        setValues({ ...values,\n          name: '',\n          description: '',\n          photo: '',\n          price: '',\n          quantity: '',\n          loading: false,\n          error: false,\n          redirectToProfile: true,\n          createdProduct: data.name\n        });\n      }\n    });\n  };\n\n  const newPostForm = () => /*#__PURE__*/React.createElement(\"form\", {\n    className: \"mb-3\",\n    onSubmit: clickSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  }, \"Post Photo\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"btn btn-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('photo'),\n    type: \"file\",\n    name: \"photo\",\n    accept: \"image/*\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('name'),\n    type: \"text\",\n    className: \"form-control\",\n    value: name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 17\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('description'),\n    type: \"text\",\n    className: \"form-control\",\n    value: description,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 17\n    }\n  }, \"Price\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('price'),\n    type: \"number\",\n    className: \"form-control\",\n    value: price,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 17\n    }\n  }, \"Category\"), /*#__PURE__*/React.createElement(\"select\", {\n    onChange: handleChange('category'),\n    className: \"form-control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 21\n    }\n  }, \"--select--\"), categories && categories.map((c, i) => /*#__PURE__*/React.createElement(\"option\", {\n    key: i,\n    value: c._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 21\n    }\n  }, c.name)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 13\n    }\n  }, \"Quantity\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('quantity'),\n    type: \"number\",\n    className: \"form-control\",\n    value: quantity,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 17\n    }\n  }, \"Shipping\"), /*#__PURE__*/React.createElement(\"select\", {\n    onChange: handleChange('shipping'),\n    className: \"form-control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 21\n    }\n  }, \"--select--\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 21\n    }\n  }, \"No\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 21\n    }\n  }, \"Yes\"))), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-outline-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 13\n    }\n  }, \"Create Product\"));\n\n  const showError = () => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    style: {\n      display: error ? '' : 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 9\n    }\n  }, error);\n\n  const showSuccess = () => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-info\",\n    style: {\n      display: createdProduct ? '' : 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 13\n    }\n  }, `${createdProduct}`, \" is updated`\"));\n\n  const redirectUser = () => {\n    if (redirectedToProfile) {\n      if (!error) {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: \"/\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 24\n          }\n        });\n      }\n    }\n  };\n\n  const showLoading = () => loading && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 13\n    }\n  }, \"Loading...\"));\n\n  function close() {\n    setProductUpdateWin();\n  }\n\n  if (!setproductUpdateWin) return null;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(CDialogShadow, {\n    onClick: close,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(CDialog, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CDashBanner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CDashBannerLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 13\n    }\n  }, productUpdateWin)), /*#__PURE__*/React.createElement(CDialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 9\n    }\n  }, showSuccess(), showError(), showLoading(), newPostForm()), /*#__PURE__*/React.createElement(CDialogFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 9\n    }\n  })));\n}","map":{"version":3,"sources":["/Users/KerrFamily/Desktop/FoodApp/src/user/ProductUpdateWinDialog.js"],"names":["React","useState","useEffect","styled","DashLabel","seaBlue","Title","isAuthenticated","Route","Link","Redirect","getProduct","getCategories","updateProduct","CDialog","div","CDialogShadow","CDialogContent","ConfirmButton","disabled","CDialogFooter","CDashBanner","CDashBannerLabel","ProdUpdateWinDialog","productUpdateWin","setProductUpdateWin","user","token","categories","setCategories","values","setValues","name","description","price","category","shipping","quantity","photo","loading","error","createdProduct","redirectedToProfile","formData","init","productId","then","data","_id","FormData","initCategories","match","params","handleChange","event","value","target","files","set","clickSubmit","preventDefault","redirectToProfile","newPostForm","map","c","i","showError","display","showSuccess","redirectUser","showLoading","close","setproductUpdateWin"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport styled from 'styled-components';\nimport { DashLabel } from './dashlinkhelper';\nimport {seaBlue} from '../Styles/colors';\nimport {Title} from '../Styles/title';\nimport {isAuthenticated} from '../auth';\nimport {Route, Link, Redirect} from 'react-router-dom';\nimport {getProduct, getCategories, updateProduct} from '../admin/apiAdmin';\n\n\n\nconst CDialog = styled.div`\nwidth: 500px;\nbackground-color: white;\nposition: fixed;\ntop: 80px;\nz-index: 5;\nmax-height: calc(100% - 100px);\nleft: calc(50% - 250px);\ndisplay: flex;\nflex-direction: column;\n`;\n\nconst CDialogShadow = styled.div`\n    position: fixed;\n    height: 100%;\n    width: 100%;\n    top: 0px;\n    background-color: black;\n    opacity: 0.7;\n    z-index: 4;\n`\n\nconst CDialogContent = styled.div`\noverflow: auto; \nmin-height: 200px;\npadding: 0px 40px;\npadding-bottom: 80px;\n`;\n\nexport const ConfirmButton = styled(Title)`\nmargin: 10px;\ncolor: white;\nheight: 20px;\nborder-radius: 5px;\npadding: 10px;\ntext-align: center;\nwidth: 200px;\ncursor: pointer;\nbackground-color: ${seaBlue};\n${({disabled}) => disabled &&\n`\nopacity: .5;\nbackground-color: grey;\npointer-events: none;\n`}\n`;\n\nconst CDialogFooter = styled.div`\nbox-shadow: 0px -2px 20px 0px grey;\nheight: 60px;\ndisplay: flex;\njustify-content: center;\n`;\n\n\n\nconst CDashBanner = styled.div`\nmin-height: 200px;\nmargin-bottom: 20px;\nbackground-image: url(\"img/shark.jpeg\");\nbackground-position: center;\nbackground-size: cover;\n`;\n\nconst CDashBannerLabel= styled(DashLabel)`\n    top: 90px;\n    font-size: 30px;\n    padding: 5px 40px;\n`\n\nexport function ProdUpdateWinDialog({productUpdateWin , setProductUpdateWin}){\n    const {user, token} = isAuthenticated();\n    const [categories, setCategories] = useState([]);\n    const [values, setValues] = useState({\n        name:'',\n        description:'',\n        price: '',\n        categories: [],\n        category: '',\n        shipping:'',\n        quantity: '',\n        photo: '',\n        loading: false,\n        error: '',\n        createdProduct: '',\n        redirectedToProfile: false,\n        formData: ''\n    })\n\n    const {\n    name,\n    description,\n    price,\n    //categories,\n    category,\n    shipping,\n    quantity,\n    loading,\n    error,\n    createdProduct,\n    redirectedToProfile,\n    formData\n    } = values;\n\n    const init = productId => {\n        getProduct(productId).then(data => {\n            if(data.error) {\n                setValues({...values, error: data.error})\n            }else{\n                //populate the state and load categories\n                setValues({...values, \n                 name: data.name,\n                 description: data.description,\n                 price: data.price,\n                 category: data.category._id,\n                 shipping: data.shipping,\n                 quantity: data.quantity,\n                 formData: new FormData()\n        });\n\n                initCategories();\n            }\n        });\n    };\n\n    //load categories and set form data\n    const initCategories = () => {\n        getCategories().then(data => {\n            if(data.error){\n                setValues({...values, error: data.error});\n            }else {\n                setCategories(data);\n                }\n        });\n    };\n\n\n\n    useEffect(() => {\n        init(match.params.productId);\n   }, []);\n\n    const handleChange = name => event => {\n        const value = name === 'photo' ? event.target.files[0]: event.target.value;\n        formData.set(name,value);\n        setValues({...values, [name]: value});\n    };\n\n    const clickSubmit = event => {\n        event.preventDefault();\n        setValues({...values, error: '', loading: true});\n\n        updateProduct(match.params.productId, user._id, token, formData).then(data => {\n            if(data.error){\n                setValues({...values, error: data.error});\n            } else {\n                setValues({\n                    ...values,\n                    name: '', \n                    description:'',\n                    photo:'',\n                    price:'',\n                    quantity:'',\n                    loading: false,\n                    error: false,\n                    redirectToProfile: true,\n                    createdProduct: data.name\n                });\n            }\n        });\n    };\n\n    const newPostForm = () => (\n        <form className=\"mb-3\" onSubmit={clickSubmit}>\n            <h4>Post Photo</h4>\n            <div className=\"form-group\">\n                <label className=\"btn btn-secondary\">\n                <input onChange={handleChange('photo')}  type=\"file\" name=\"photo\" accept=\"image/*\"/>\n                </label>\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Name</label>\n                <input onChange={handleChange('name')} type=\"text\" className=\"form-control\" value={name}/>\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Description</label>\n                <input onChange={handleChange('description')} type=\"text\" className=\"form-control\" value={description}/>\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Price</label>\n                <input onChange={handleChange('price')} type=\"number\" className=\"form-control\" value={price}/>\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Category</label>\n                <select \n                onChange={handleChange('category')} \n                className=\"form-control\" \n                >\n                    <option>--select--</option>\n                    {categories && categories.map((c, i) => (\n                    <option key={i} value={c._id}>{c.name}\n                    </option>\n                    ))}\n                </select>\n            </div>\n            <div className=\"form-group\">\n            <label className=\"text-muted\">Quantity</label>\n                <input \n                onChange={handleChange('quantity')} \n                type=\"number\" \n                className=\"form-control\" \n                value={quantity}/>\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Shipping</label>\n                <select \n                onChange={handleChange('shipping')} \n                className=\"form-control\" \n                >\n                    <option>--select--</option>\n                    <option value=\"0\">No</option>\n                    <option value=\"1\">Yes</option>\n\n                </select>\n            </div>\n            <button className=\"btn btn-outline-primary\">Create Product</button>\n        </form>\n    );\n\n    const showError = () =>(\n        <div className=\"alert alert-danger\" style={{display: error ? '': 'none'}}>\n            {error}\n        </div>\n    );\n\n    const showSuccess = () =>(\n        <div className=\"alert alert-info\" style={{display: createdProduct ? '': 'none'}}>\n            <h2>{`${createdProduct}`} is updated`</h2>\n        </div>\n    );\n\n    const redirectUser = () => {\n        if(redirectedToProfile){\n            if(!error){\n                return <Redirect to=\"/\" />;\n            }\n        }\n    };\n\n    const showLoading = () =>(\n        loading && (<div className=\"alert alert-success\">\n            <h2>Loading...</h2>\n        </div>)\n    );\n\n    function close() {\n        setProductUpdateWin();\n    }\n\n    if(!setproductUpdateWin) return null;\n    return (\n     <>\n    <CDialogShadow onClick={close}/>\n    <CDialog>\n        <CDashBanner>\n            <CDashBannerLabel>\n                {productUpdateWin}\n            </CDashBannerLabel>\n        </CDashBanner>\n        <CDialogContent>\n                     {showSuccess()}\n                    {showError()}\n                    {showLoading()}\n                    {newPostForm()}\n        </CDialogContent>\n        <CDialogFooter>\n        </CDialogFooter>\n    </CDialog>\n    </>\n    );\n}"]},"metadata":{},"sourceType":"module"}