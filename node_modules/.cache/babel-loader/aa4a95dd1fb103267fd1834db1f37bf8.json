{"ast":null,"code":"import _defineProperty from\"/Users/KerrFamily/Desktop/FoodApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/KerrFamily/Desktop/FoodApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/KerrFamily/Desktop/FoodApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/KerrFamily/Desktop/FoodApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject2(){var data=_taggedTemplateLiteral([\"\\nposition: absolute;\\nbackground-color: rgba(255, 255, 255, .75);\\npadding-right: 15px;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\ndisplay: grid;\\ngrid-template-columns: 1fr;\\ngap: 20px;\\npadding-bottom: 40px;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState}from'react';import{Redirect,Link}from'react-router-dom';import{Navbar}from'../Navar/Navbar';import{Banner}from\"../Banner/Banner\";import{GlobalStyle}from\"../Styles/GlobalStyle\";import{FoodDialog}from\"../FoodDialog/FoodDialog\";import styled from\"styled-components\";import{Title}from\"../Styles/title\";import{signin,authenticate,isAuthenticated,guest}from'../auth';function refreshPage(){window.location.reload(false);}export var SigninGrid=styled.div(_templateObject());export var SigninLabel=styled(Title)(_templateObject2());function Signin(){var _useState=useState({email:\"\",password:\"\",error:\"\",loading:false,redirectToReferrer:false}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var email=values.email,password=values.password,loading=values.loading,error=values.error,redirectToReferrer=values.redirectToReferrer;var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user;var handleChange=function handleChange(name){return function(event){setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({error:false},name,event.target.value)));};};var clickSubmit=function clickSubmit(event){event.preventDefault();setValues(_objectSpread(_objectSpread({},values),{},{error:false,loading:true}));signin({email:email,password:password}).then(function(data){if(data.error){setValues(_objectSpread(_objectSpread({},values),{},{error:data.error,loading:false}));}else{authenticate(data,function(){setValues(_objectSpread(_objectSpread({},values),{},{redirectToReferrer:true}));refreshPage();});}});};var signUpForm=function signUpForm(){return/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-muted\"},\"Email: \"),/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange('email'),type:\"email\",className:\"form-control\",value:email})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-muted\"},\"Password: \"),/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange('password'),type:\"password\",className:\"form-control\",value:password})),/*#__PURE__*/React.createElement(\"button\",{onClick:clickSubmit,className:\"btn btn-primary\"},\"Submit\"),/*#__PURE__*/React.createElement(\"div\",null,\" \",/*#__PURE__*/React.createElement(Link,{to:\"/signup\"},\"Click here to register...\")));};var showError=function showError(){return/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\",style:{display:error?'':'none'}},error);};var showLoading=function showLoading(){return loading&&/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-info\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Loading...\"));};var redirectUser=function redirectUser(){if(redirectToReferrer){if(user&&user.role===1){return/*#__PURE__*/React.createElement(Redirect,{to:\"/admindash\"});}else{return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}}// if(isAuthenticated()){\n//  return <Redirect to=\"/\" />;\n// }\n};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(GlobalStyle,null),/*#__PURE__*/React.createElement(FoodDialog,null),/*#__PURE__*/React.createElement(Navbar,null),/*#__PURE__*/React.createElement(Banner,null),/*#__PURE__*/React.createElement(SigninGrid,null,/*#__PURE__*/React.createElement(SigninLabel,null,\"Please Sign-in!\",showLoading(),showError(),signUpForm(),redirectUser())));}export default Signin;","map":{"version":3,"sources":["/Users/KerrFamily/Desktop/FoodApp/src/user/Signin.js"],"names":["React","useState","Redirect","Link","Navbar","Banner","GlobalStyle","FoodDialog","styled","Title","signin","authenticate","isAuthenticated","guest","refreshPage","window","location","reload","SigninGrid","div","SigninLabel","Signin","email","password","error","loading","redirectToReferrer","values","setValues","user","handleChange","name","event","target","value","clickSubmit","preventDefault","then","data","signUpForm","showError","display","showLoading","redirectUser","role"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport {Redirect, Link} from 'react-router-dom';\nimport {Navbar} from '../Navar/Navbar';\nimport {Banner} from \"../Banner/Banner\";\nimport {GlobalStyle} from \"../Styles/GlobalStyle\";\nimport {FoodDialog} from \"../FoodDialog/FoodDialog\";\nimport styled from \"styled-components\";\nimport {Title} from \"../Styles/title\";\nimport {signin, authenticate, isAuthenticated, guest} from '../auth';\n\nfunction refreshPage() {\n    window.location.reload(false);\n  }\n\nexport const SigninGrid = styled.div`\ndisplay: grid;\ngrid-template-columns: 1fr;\ngap: 20px;\npadding-bottom: 40px;\n`;\nexport const SigninLabel = styled(Title)`\nposition: absolute;\nbackground-color: rgba(255, 255, 255, .75);\npadding-right: 15px;\n`;\n\nfunction Signin() {\n    const [values, setValues] = useState({\n        email: \"\",\n        password: \"\",\n        error: \"\",\n        loading: false,\n        redirectToReferrer: false,\n    });\n\n    const {email, password, loading, error, redirectToReferrer} = values;\n    const {user} = isAuthenticated();\n\n    const handleChange = name => event => {\n        setValues({...values, error: false, [name]:event.target.value});\n    };\n\n    const clickSubmit = event => {\n        event.preventDefault();\n        setValues({...values, error: false, loading: true});\n        signin({email, password})\n        .then(data => {\n            if(data.error) {\n                setValues({...values, error: data.error, loading: false});\n            } else {\n                authenticate(data, () => {\n                    setValues({\n                        ...values,\n                        redirectToReferrer: true\n                    });\n                    refreshPage()\n                });\n            }\n        });\n    };\n\n    const signUpForm = () =>(\n        <form>\n        <div className=\"form-group\">\n             <label className=\"text-muted\">Email: </label>\n              <input onChange={handleChange('email')} type=\"email\" \n              className=\"form-control\" value={email}/>\n        </div>\n         <div className=\"form-group\">\n             <label className=\"text-muted\">Password: </label>\n              <input onChange={handleChange('password')} type=\"password\" \n              className=\"form-control\" value={password}/>\n        </div>\n        <button onClick={clickSubmit} className=\"btn btn-primary\">Submit</button>\n       <div> <Link to=\"/signup\">Click here to register...</Link></div>\n        </form>\n    );\n\n    const showError = () => (\n        <div className=\"alert alert-danger\" style={{display: error ? '' : 'none'}}>\n            {error}\n        </div>\n    );\n\n    const showLoading = () => \n       loading && (\n       <div className=\"alert alert-info\">\n           <h2>Loading...</h2>\n       </div>\n    );\n\n    const redirectUser = () => {\n        if(redirectToReferrer){\n            if(user && user.role ===1){\n                return <Redirect to=\"/admindash\"/>;\n            } else{\n                return <Redirect to=\"/\"/>;\n            }\n        }\n        // if(isAuthenticated()){\n        //  return <Redirect to=\"/\" />;\n        // }\n    };\n\n\n  return (\n    <>\n    <GlobalStyle/>\n    <FoodDialog/>\n    <Navbar/>\n    <Banner/>\n    <SigninGrid>\n        <SigninLabel>\n            Please Sign-in!\n    {showLoading()}\n    {showError()}\n    {signUpForm()}\n    {redirectUser()}\n    </SigninLabel>\n    </SigninGrid>\n\n   </>\n  );\n}\n\nexport default Signin;\n"]},"metadata":{},"sourceType":"module"}