{"ast":null,"code":"import _toConsumableArray from\"/Users/KerrFamily/Desktop/FoodApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/KerrFamily/Desktop/FoodApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/KerrFamily/Desktop/FoodApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/KerrFamily/Desktop/FoodApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n    color: gray;\\n    font-size: 10px;\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n    padding: 10px 0px;\\n    display: grid;\\n    grid-template-columns: 20px 150px 20px 60px;\\n    justify-content: space-between;\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n    padding: 10px 0px;\\n    border-bottom: 1px solid grey;\\n    \",\"\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\npadding: 20px;\\nheight: 100%\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\nposition: fixed;\\nright: 0px;\\ntop: 57px;\\nwidth: 340px;\\nbackground-color: white;\\nheight: calc(100% - 48px);\\nz-index: 10;\\nbox-shadow: 4px 0px 5px 4px grey;\\ndisplay: flex;\\nflex-direction: column;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState,useEffect}from'react';import{Redirect,Link}from'react-router-dom';import styled from'styled-components';import{DialogContent,DialogFooter,ConfirmButton}from\"../FoodDialog/FoodDialog\";import{formatPrice}from\"../Data/FoodData\";import{getPrice}from\"../FoodDialog/FoodDialog\";import{removeItem,getCart}from\"../Cart/carthelper\";import{signin,authenticate}from'../auth';var OrderStyled=styled.div(_templateObject());var OrderContent=styled(DialogContent)(_templateObject2());var OrderContainer=styled.div(_templateObject3(),function(_ref){var editable=_ref.editable;return editable?\"\\n&:hover {\\n    cursor: pointer;\\n    background-color: #e7e7e7;\\n}\\n\":\"\\n    pointer-events: none;\\n    \";});var OrderItem=styled.div(_templateObject4());var DetailItem=styled.div(_templateObject5());function refreshPage(){window.location.reload(false);}export function Order(_ref2){var orders=_ref2.orders,setOrders=_ref2.setOrders,setOpenFood=_ref2.setOpenFood;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];var subtotal=items.reduce(function(total,order){return total+getPrice(order);},0);var tax=subtotal*0.07;var processingFee=(tax+subtotal)*0.05;var total=subtotal+tax+processingFee;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),run=_useState4[0],setRun=_useState4[1];var _useState5=useState({email:\"guest@guest.com\",password:\"Franslk1\",error:\"\",loading:false,redirectToReferrer:false}),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];var email=user.email,password=user.password,loading=user.loading,error=user.error,redirectToReferrer=user.redirectToReferrer;var clickSubmit=function clickSubmit(event){event.preventDefault();setUser(_objectSpread(_objectSpread({},user),{},{error:false,loading:true}));signin({email:email,password:password}).then(function(data){if(data.error){setUser(_objectSpread(_objectSpread({},user),{},{error:data.error,loading:false}));}else{authenticate(data,function(){setUser(_objectSpread(_objectSpread({},user),{},{redirectToReferrer:true}));refreshPage();});}});};var redirectUser=function redirectUser(){if(redirectToReferrer){return/*#__PURE__*/React.createElement(Redirect,{to:\"/checkout\"});}};useEffect(function(){setItems(getCart());console.log(items);},[run]);var deleteItem=function deleteItem(index){var newOrders=_toConsumableArray(orders);newOrders.splice(index,1);setOrders(newOrders);};return/*#__PURE__*/React.createElement(OrderStyled,null,items.length===0?/*#__PURE__*/React.createElement(OrderContent,null,\"Your cart is empty...\"):/*#__PURE__*/React.createElement(OrderContent,null,\" \",/*#__PURE__*/React.createElement(OrderContainer,null,\"You have \",items.length,\" item(s) in your cart.\"),\" \",items.map(function(order,index){return/*#__PURE__*/React.createElement(OrderContainer,{editable:true},/*#__PURE__*/React.createElement(OrderItem,{onClick:function onClick(){setOpenFood(_objectSpread(_objectSpread({},order),{},{index:index}));}},/*#__PURE__*/React.createElement(\"div\",null,order.quantity),/*#__PURE__*/React.createElement(\"div\",null,order.name),/*#__PURE__*/React.createElement(\"div\",{style:{cursor:'pointer'},onClick:function onClick(e){e.stopPropagation();deleteItem(index);removeItem(order._id);refreshPage();}},\"\\uD83D\\uDDD1\"),/*#__PURE__*/React.createElement(\"div\",null,formatPrice(getPrice(order)))),/*#__PURE__*/React.createElement(DetailItem,null,order.toppings.filter(function(t){return t.checked;}).map(function(topping){return topping.name;}).join(\", \")),order.choice&&/*#__PURE__*/React.createElement(DetailItem,null,order.choice));}),/*#__PURE__*/React.createElement(OrderContainer,null,/*#__PURE__*/React.createElement(OrderItem,null,/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",null,\"Sub-Total:\"),/*#__PURE__*/React.createElement(\"div\",null,formatPrice(subtotal))),/*#__PURE__*/React.createElement(OrderItem,null,/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",null,\"Tax:\"),/*#__PURE__*/React.createElement(\"div\",null,formatPrice(tax))),/*#__PURE__*/React.createElement(OrderItem,null,/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",null,\"Processing Fee:\"),/*#__PURE__*/React.createElement(\"div\",null,formatPrice(processingFee)))),/*#__PURE__*/React.createElement(OrderContainer,null,/*#__PURE__*/React.createElement(OrderItem,null,/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",null,\"Total\"),/*#__PURE__*/React.createElement(\"div\",null,formatPrice(total))))),/*#__PURE__*/React.createElement(DialogFooter,null,/*#__PURE__*/React.createElement(ConfirmButton,null,/*#__PURE__*/React.createElement(Link,{to:\"/checkout\"},\"Checkout \")),/*#__PURE__*/React.createElement(ConfirmButton,null,/*#__PURE__*/React.createElement(Link,{to:\"/checkout\",onClick:clickSubmit},\"Guest Checkout \"),redirectUser())));}","map":{"version":3,"sources":["/Users/KerrFamily/Desktop/FoodApp/src/Order/Order.js"],"names":["React","useState","useEffect","Redirect","Link","styled","DialogContent","DialogFooter","ConfirmButton","formatPrice","getPrice","removeItem","getCart","signin","authenticate","OrderStyled","div","OrderContent","OrderContainer","editable","OrderItem","DetailItem","refreshPage","window","location","reload","Order","orders","setOrders","setOpenFood","items","setItems","subtotal","reduce","total","order","tax","processingFee","run","setRun","email","password","error","loading","redirectToReferrer","user","setUser","clickSubmit","event","preventDefault","then","data","redirectUser","console","log","deleteItem","index","newOrders","splice","length","map","quantity","name","cursor","e","stopPropagation","_id","toppings","filter","t","checked","topping","join","choice"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport {Redirect, Link} from 'react-router-dom';\nimport styled from 'styled-components';\nimport {DialogContent, DialogFooter, ConfirmButton} from \"../FoodDialog/FoodDialog\";\nimport {formatPrice} from \"../Data/FoodData\";\nimport {getPrice} from \"../FoodDialog/FoodDialog\";\nimport {removeItem, getCart} from \"../Cart/carthelper\";\nimport {signin, authenticate} from '../auth';\n\n  \nconst OrderStyled = styled.div`\nposition: fixed;\nright: 0px;\ntop: 57px;\nwidth: 340px;\nbackground-color: white;\nheight: calc(100% - 48px);\nz-index: 10;\nbox-shadow: 4px 0px 5px 4px grey;\ndisplay: flex;\nflex-direction: column;\n`;\n\nconst OrderContent = styled(DialogContent)`\npadding: 20px;\nheight: 100%\n`;\n\nconst OrderContainer = styled.div`\n    padding: 10px 0px;\n    border-bottom: 1px solid grey;\n    ${({editable}) =>\neditable ? `\n&:hover {\n    cursor: pointer;\n    background-color: #e7e7e7;\n}\n`\n    : `\n    pointer-events: none;\n    `}\n`;\n\nconst OrderItem = styled.div`\n    padding: 10px 0px;\n    display: grid;\n    grid-template-columns: 20px 150px 20px 60px;\n    justify-content: space-between;\n`;\n\nconst DetailItem = styled.div`\n    color: gray;\n    font-size: 10px;\n`\n\nfunction refreshPage() {\n    window.location.reload(false);\n  }\n\nexport function Order({orders, setOrders, setOpenFood}) {\n    const [items, setItems] = useState([]);\n    const subtotal = items.reduce((total, order) => {\n        return total + getPrice(order);\n    }, 0);\n    const tax = subtotal * 0.07;\n    const processingFee = (tax + subtotal) * 0.05;\n    const total = subtotal + tax + processingFee;\n    const [run, setRun] = useState(false);\n    const [user, setUser] = useState({\n        email: \"guest@guest.com\",\n        password: \"Franslk1\",\n        error: \"\",\n        loading: false,\n        redirectToReferrer: false,\n    });\n\n    const {email, password, loading, error, redirectToReferrer} = user;\n\n    const clickSubmit = event => {\n        event.preventDefault();\n        setUser({...user, error: false, loading: true});\n        signin({email, password})\n        .then(data => {\n            if(data.error) {\n                setUser({...user, error: data.error, loading: false});\n            } else {\n                authenticate(data, () => {\n                    setUser({\n                        ...user,\n                        redirectToReferrer: true\n                    });\n                    refreshPage()\n                });\n            }\n        });\n    };\n\n    const redirectUser = () => {\n        if(redirectToReferrer){\n            return <Redirect to=\"/checkout\"/>;\n        }\n    };\n\n    useEffect(()=> {\n        setItems(getCart());\n        console.log(items);\n    }, [run]);\n\n    const deleteItem= (index) => {\n        const newOrders = [...orders];\n        newOrders.splice(index, 1);\n        setOrders(newOrders);\n        \n    }\n\n    return <OrderStyled>\n    {items.length === 0 ?<OrderContent>Your cart is empty...\n        </OrderContent> : \n        <OrderContent>\n            {\" \"}\n            <OrderContainer>\n            You have {items.length} item(s) in your cart.\n            </OrderContainer>\n            {\" \"}\n            {items.map((order, index) => (\n                <OrderContainer editable>\n                    <OrderItem\n                    onClick={() => {\n                        setOpenFood({...order, index});\n\n                    }}\n                    >\n                        <div>{order.quantity}</div>\n                        <div>{order.name}</div>\n                        <div \n                        style={{cursor: 'pointer'}} \n                        onClick={e =>{\n                            e.stopPropagation();\n                            deleteItem(index);removeItem(order._id);refreshPage()}}>🗑</div>\n            <div>{formatPrice(getPrice(order))}</div>\n                    </OrderItem>\n                    <DetailItem>\n                        {order.toppings\n                        .filter(t => t.checked)\n                        .map(topping => topping.name)\n                        .join(\", \")\n                        }\n                    </DetailItem>\n                    {order.choice && <DetailItem>{order.choice}\n                    </DetailItem>}\n                </OrderContainer>\n                 ))}\n                <OrderContainer>\n                    <OrderItem>\n                    <div/>\n                    <div>Sub-Total:</div>\n                    <div>{formatPrice(subtotal)}</div>\n                    </OrderItem>\n                    <OrderItem>\n                    <div/>\n                    <div>Tax:</div>\n                    <div>{formatPrice(tax)}</div>\n                    </OrderItem>\n                    <OrderItem>\n                    <div/>\n                    <div>Processing Fee:</div>\n                    <div>{formatPrice(processingFee)}</div>\n                    </OrderItem>\n                </OrderContainer>\n                <OrderContainer>\n                    <OrderItem>\n                    <div/>\n                    <div>Total</div>\n                    <div>{formatPrice(total)}</div>\n                    </OrderItem>\n                </OrderContainer>\n           \n        </OrderContent>}\n        <DialogFooter>\n            <ConfirmButton>\n                <Link to=\"/checkout\">\n                Checkout </Link>\n            </ConfirmButton>\n            <ConfirmButton>\n                <Link to=\"/checkout\"\n                onClick={clickSubmit}\n                >\n                Guest Checkout </Link>\n                {redirectUser()}\n            </ConfirmButton>\n            \n        </DialogFooter>\n    </OrderStyled>\n}"]},"metadata":{},"sourceType":"module"}