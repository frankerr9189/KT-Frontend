{"ast":null,"code":"var _jsxFileName = \"/Users/KerrFamily/Desktop/FoodApp/src/user/CheckoutStyled.js\";\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { formatPrice } from \"../Data/FoodData\";\nimport { API } from \"../config\";\nimport { isAuthenticated } from '../auth';\nimport { useOpenFood } from \"../Hooks/useOpenFood\";\nimport { useOrders } from \"../Hooks/useOrders\";\nimport { useTitle } from \"../Hooks/useTitle\";\nimport { DialogContent, DialogFooter, DialogBanner, DialogBannerName, ConfirmButton } from \"../FoodDialog/FoodDialog\";\nimport { FoodLabel } from \"../Menu/FoodGrid\";\nimport { getCart } from \"../Cart/carthelper\";\nimport { getBraintreeClientToken } from \"../admin/adminApi\";\nimport { Link } from \"react-router-dom\";\nimport DropIn from 'braintree-web-drop-in-react';\nexport const FoodGrid = styled.div`\ndisplay: grid;\nwidth: 1000px;\ngrid-template-columns: 1fr 1fr 1fr;\ngap: 20px;\npadding-bottom: 40px;\n`;\nconst CartStyled = styled.div`\ntop: 300px;\nwidth: 600px;\nbackground-color: white;\nheight: 300px;\nz-index: 10;\nbox-shadow: 4px 0px 5px 4px grey;\ndisplay: flex;\nflex-direction: column;\n`;\nconst CartContent = styled(DialogContent)`\npadding: 20px;\nheight: 100%\n`;\nconst CartContainer = styled.div`\n    padding: 10px 0px;\n    border-bottom: 1px solid grey;\n    ${({\n  editable\n}) => editable ? `\n&:hover {\n    cursor: pointer;\n    background-color: #e7e7e7;\n}\n` : `\n    pointer-events: none;\n    `}\n`;\nconst CartItem = styled.div`\n    padding: 10px 0px;\n    display: grid;\n    grid-template-columns: 20px 150px 20px 60px;\n    justify-content: space-between;\n`;\nexport const CartBanner = styled.div`\nmin-height: 50px;\nmargin-bottom: 20px;\nbackground-image: url(\"img/shark.jpeg\");\nbackground-position: center;\nbackground-size: cover;\n`;\nexport const CartBannerName = styled(FoodLabel)`\n    font-size: 25px;\n    padding: 5px 20px;\n    \n`;\nconst DetailItem = styled.div`\n    color: gray;\n    font-size: 10px;\n`;\nconst PaymentStyled = styled.div`\n    height: 400px;\n    width: 400px;\n    z-index: 10;\nbox-shadow: 4px 0px 5px 4px grey;\ndisplay: flex;\nflex-direction: column;\n`;\nconst ShippingBox = styled.div`\n    height: 300px;\n    width: 400px;\n    z-index: 10;\nbox-shadow: 4px 0px 5px 4px grey;\ndisplay: flex;\nflex-direction: column;\n`;\nexport function CheckoutStyled() {\n  const openFood = useOpenFood();\n  const orders = useOrders();\n  useTitle({ ...openFood,\n    ...orders\n  });\n  const [items, setItems] = useState([]);\n  const [run, setRun] = useState(false);\n  const [values, setValues] = useState({\n    success: false,\n    clientToken: null,\n    error: '',\n    instance: {},\n    user: \"\",\n    orderItems: \"\",\n    shipName: \"\",\n    shipEmail: \"\",\n    shipAddress: \"\",\n    shipCity: \"\",\n    shipState: \"\",\n    shipZip: \"\",\n    method: \"\",\n    payment: \"\",\n    subTotal: \"\",\n    taxPrice: \"\",\n    processingFee: \"\",\n    totalPrice: \"\"\n  });\n  const {\n    orderItems,\n    shipName,\n    shipEmail,\n    shipAddress,\n    shipCity,\n    shipState,\n    shipZip,\n    method,\n    payment,\n    subTotal,\n    processingFee,\n    totalPrice\n  } = values;\n  useEffect(() => {\n    setItems(getCart());\n  }, [run]);\n\n  const showItems = items => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }\n    }), items.map((product, i) => /*#__PURE__*/React.createElement(DetailItem, {\n      key: i,\n      items: product,\n      setRun: setRun,\n      run: run,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }\n    }, product.name, \" \", \" Qty: \", \" \", product.quantity, \" \", \" \", \" \", product.topping, \" $\", product.price)));\n  };\n\n  const userId = isAuthenticated() && isAuthenticated().user._id;\n\n  const token = isAuthenticated() && isAuthenticated().token;\n\n  const getToken = (userId, token) => {\n    getBraintreeClientToken(userId, token).then(values => {\n      if (values.error) {\n        setValues({ ...values,\n          error: values.error\n        });\n      } else {\n        setValues({ ...values,\n          clientToken: values.clientToken\n        });\n      }\n    });\n  };\n\n  useEffect(() => {\n    getToken(userId, token);\n  }, []);\n\n  const showDropIn = () => /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }\n  }, values.clientToken !== null && items.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(DropIn, {\n    options: {\n      authorization: values.clientToken,\n      paypal: {\n        flow: 'vault'\n      }\n    },\n    onInstance: instance => values.instance = instance,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-success btn-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 21\n    }\n  }, \"Pay\")) : null);\n\n  const handleChange = name => event => {\n    const value = name === 'name' ? event.target.files[0] : event.target.value;\n    setValues({ ...values,\n      [name]: value\n    });\n  };\n\n  const clickSubmit = event => {\n    event.preventDefault();\n    setValues({ ...values\n    });\n    console.log(values);\n  };\n\n  const handleMethod = event => {\n    setValues({ ...values,\n      method: event.target.value\n    });\n    console.log(values);\n  };\n\n  let methodSelection = values.method;\n\n  const shippingMethod = () => /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 25\n    }\n  }, \"Method Type:\"), /*#__PURE__*/React.createElement(\"select\", {\n    className: \"form-control\",\n    onChange: handleMethod,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 17\n    }\n  }, \"Select Method\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 17\n    }\n  }, \"Pick Up\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 17\n    }\n  }, \"Delivery\")));\n\n  const shippingForm = () => /*#__PURE__*/React.createElement(\"form\", {\n    className: \"mb-3\",\n    onSubmit: clickSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 17\n    }\n  }, \"Name: \"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('shipName'),\n    type: \"text\",\n    className: \"form-control\",\n    value: shipName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 17\n    }\n  }, \"Email: \"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('shipEmail'),\n    type: \"text\",\n    className: \"form-control\",\n    value: shipEmail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 17\n    }\n  }, \"Address: \"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('shipAddress'),\n    type: \"text\",\n    className: \"form-control\",\n    value: shipAddress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 17\n    }\n  }, \"City: \"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('shipCity'),\n    type: \"text\",\n    className: \"form-control\",\n    value: shipCity,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 17\n    }\n  }, \"State: \"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('shipState'),\n    type: \"text\",\n    className: \"form-control\",\n    value: shipState,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 17\n    }\n  }, \"Zip: \"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('shipZip'),\n    type: \"text\",\n    className: \"form-control\",\n    value: shipZip,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 17\n    }\n  })));\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FoodGrid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ShippingBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CartBanner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CartBannerName, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 13\n    }\n  }, \"Delivery Address\")), shippingMethod(), shippingForm()), /*#__PURE__*/React.createElement(CartStyled, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CartContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CartBanner, {\n    img: `${API}/product/photo/shark.jpeg`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CartBannerName, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 9\n    }\n  }, \"Summary, your cart has \", `${items.length}`, \" items.\")), /*#__PURE__*/React.createElement(CartContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 9\n    }\n  }, showItems(items)))), /*#__PURE__*/React.createElement(PaymentStyled, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CartBanner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CartBannerName, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 13\n    }\n  }, \"Payment Method\")), showDropIn())));\n}","map":{"version":3,"sources":["/Users/KerrFamily/Desktop/FoodApp/src/user/CheckoutStyled.js"],"names":["React","useState","useEffect","styled","formatPrice","API","isAuthenticated","useOpenFood","useOrders","useTitle","DialogContent","DialogFooter","DialogBanner","DialogBannerName","ConfirmButton","FoodLabel","getCart","getBraintreeClientToken","Link","DropIn","FoodGrid","div","CartStyled","CartContent","CartContainer","editable","CartItem","CartBanner","CartBannerName","DetailItem","PaymentStyled","ShippingBox","CheckoutStyled","openFood","orders","items","setItems","run","setRun","values","setValues","success","clientToken","error","instance","user","orderItems","shipName","shipEmail","shipAddress","shipCity","shipState","shipZip","method","payment","subTotal","taxPrice","processingFee","totalPrice","showItems","map","product","i","name","quantity","topping","price","userId","_id","token","getToken","then","showDropIn","length","authorization","paypal","flow","handleChange","event","value","target","files","clickSubmit","preventDefault","console","log","handleMethod","methodSelection","shippingMethod","shippingForm"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport styled from 'styled-components';\nimport {formatPrice} from \"../Data/FoodData\";\nimport {API} from \"../config\";\nimport {isAuthenticated} from '../auth';\nimport {useOpenFood} from \"../Hooks/useOpenFood\";\nimport {useOrders} from \"../Hooks/useOrders\";\nimport {useTitle} from \"../Hooks/useTitle\";\nimport {DialogContent, DialogFooter, DialogBanner, DialogBannerName, ConfirmButton} from \"../FoodDialog/FoodDialog\";\nimport {FoodLabel} from \"../Menu/FoodGrid\";\nimport {getCart} from \"../Cart/carthelper\";\nimport {getBraintreeClientToken} from \"../admin/adminApi\";\nimport {Link} from \"react-router-dom\";\nimport DropIn from 'braintree-web-drop-in-react';\n\nexport const FoodGrid = styled.div`\ndisplay: grid;\nwidth: 1000px;\ngrid-template-columns: 1fr 1fr 1fr;\ngap: 20px;\npadding-bottom: 40px;\n`;\n\n\nconst CartStyled = styled.div`\ntop: 300px;\nwidth: 600px;\nbackground-color: white;\nheight: 300px;\nz-index: 10;\nbox-shadow: 4px 0px 5px 4px grey;\ndisplay: flex;\nflex-direction: column;\n`;\n\nconst CartContent = styled(DialogContent)`\npadding: 20px;\nheight: 100%\n`;\n\nconst CartContainer = styled.div`\n    padding: 10px 0px;\n    border-bottom: 1px solid grey;\n    ${({editable}) =>\neditable ? `\n&:hover {\n    cursor: pointer;\n    background-color: #e7e7e7;\n}\n`\n    : `\n    pointer-events: none;\n    `}\n`;\n\nconst CartItem = styled.div`\n    padding: 10px 0px;\n    display: grid;\n    grid-template-columns: 20px 150px 20px 60px;\n    justify-content: space-between;\n`;\nexport const CartBanner = styled.div`\nmin-height: 50px;\nmargin-bottom: 20px;\nbackground-image: url(\"img/shark.jpeg\");\nbackground-position: center;\nbackground-size: cover;\n`;\nexport const CartBannerName = styled(FoodLabel)`\n    font-size: 25px;\n    padding: 5px 20px;\n    \n`;\n\nconst DetailItem = styled.div`\n    color: gray;\n    font-size: 10px;\n`\n\nconst PaymentStyled = styled.div`\n    height: 400px;\n    width: 400px;\n    z-index: 10;\nbox-shadow: 4px 0px 5px 4px grey;\ndisplay: flex;\nflex-direction: column;\n`\nconst ShippingBox = styled.div`\n    height: 300px;\n    width: 400px;\n    z-index: 10;\nbox-shadow: 4px 0px 5px 4px grey;\ndisplay: flex;\nflex-direction: column;\n`\n\n\nexport function CheckoutStyled(){ \n    const openFood = useOpenFood();\n    const orders = useOrders();\n    useTitle({...openFood, ...orders});\n    const [items, setItems] = useState([]);\n    const [run, setRun] = useState(false);\n    const [values, setValues] = useState(\n        {\n    success: false,\n    clientToken: null,\n    error: '',\n    instance: {},\n    user: \"\",\n    orderItems: \"\",\n    shipName: \"\",\n    shipEmail: \"\",\n    shipAddress: \"\",\n    shipCity: \"\",\n    shipState: \"\",\n    shipZip: \"\",\n    method: \"\",\n    payment: \"\",\n    subTotal: \"\",\n    taxPrice: \"\",\n    processingFee:\"\",\n    totalPrice: \"\",\n        }\n    );\n\n    const {orderItems, shipName, shipEmail, shipAddress, shipCity, shipState, shipZip, method, payment, subTotal, processingFee, totalPrice} = values;\n\n    useEffect(()=> {\n        setItems(getCart());\n    }, [run]);\n    \n    const showItems = items => {\n        return(\n            <div>\n                <hr/>\n                {items.map((product, i)=> (\n                <DetailItem \n                key ={i} \n                items={product}\n                setRun={setRun}\n                run={run}\n                >{product.name} {\" Qty: \"} {product.quantity} {\" \"} {product.topping}{\" $\"}{product.price}</DetailItem>\n                ))\n                }\n            </div>\n        );\n    };\n\n    const userId = isAuthenticated() && isAuthenticated().user._id;\n    const token = isAuthenticated() && isAuthenticated().token;\n\n    const getToken = (userId, token) => {\n        getBraintreeClientToken(userId, token).then(values => {\n            if(values.error) {\n                setValues({...values, error: values.error})\n            }else{\n                setValues({...values, clientToken: values.clientToken})\n            }\n        })\n    };\n\n    useEffect(()=>{\n        getToken(userId, token)\n    }, []);\n\n    const showDropIn= () => (\n        <div>\n            {values.clientToken !== null && items.length>0 ? (\n                <div>\n                    <DropIn\n                        options={{\n                            authorization: values.clientToken,\n                            paypal: {\n                                flow: 'vault'\n                            }\n                        }}\n                        onInstance={instance => (values.instance = instance)}\n                    />\n                    <button className=\"btn btn-success btn-block\">\n                        Pay\n                    </button>\n                </div>\n            ) : null}\n        </div>\n    );\n\n    const handleChange = name => event => {\n        const value = name === 'name' ? event.target.files[0]: event.target.value;\n        setValues({...values, [name]: value});\n    };\n\n    const clickSubmit = event => {\n        event.preventDefault();\n        setValues({...values});\n        console.log((values));\n     };\n\n     const handleMethod = event => {\n        setValues({...values, method: event.target.value });\n        console.log(values);\n    };\n\n    let methodSelection = values.method;\n\n    const shippingMethod = () => (\n        <div>\n                        <label>Method Type:</label>\n                        <select \n            className=\"form-control\" onChange={handleMethod}\n           >\n                <option>Select Method</option>\n                <option>Pick Up</option>\n                <option>Delivery</option>\n            </select>\n       </div>\n    )\n\n    const shippingForm = () => (\n        <form className=\"mb-3\" onSubmit={clickSubmit}>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Name: </label>\n                <input onChange={handleChange('shipName')} type=\"text\" className=\"form-control\" value={shipName}/>\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Email: </label>\n                <input onChange={handleChange('shipEmail')} type=\"text\" className=\"form-control\" value={shipEmail}/>\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Address: </label>\n                <input onChange={handleChange('shipAddress')} type=\"text\" className=\"form-control\" value={shipAddress}/>\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">City: </label>\n                <input onChange={handleChange('shipCity')} type=\"text\" className=\"form-control\" value={shipCity}/>\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">State: </label>\n                <input onChange={handleChange('shipState')} type=\"text\" className=\"form-control\" value={shipState}/>\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Zip: </label>\n                <input onChange={handleChange('shipZip')} type=\"text\" className=\"form-control\" value={shipZip}/>\n            </div>\n            {/* <button className=\"btn btn-outline-primary\">Shipping</button> */}\n        </form>\n    );\n\n    return (\n        <>\n        <FoodGrid> \n    <ShippingBox>\n        <CartBanner>\n            <CartBannerName>Delivery Address</CartBannerName></CartBanner>\n        {shippingMethod()}\n        {shippingForm()}\n    </ShippingBox>\n    \n    <CartStyled>\n    <CartContainer>\n    <CartBanner img={`${API}/product/photo/shark.jpeg`}>\n        <CartBannerName>Summary, your cart has {`${items.length}`} items.</CartBannerName>\n    </CartBanner>\n        <CartContent>\n            {showItems(items)}\n        </CartContent>\n    </CartContainer>\n    </CartStyled>\n\n    <PaymentStyled>\n    <CartBanner>\n            <CartBannerName>Payment Method</CartBannerName></CartBanner>\n            {showDropIn()}\n    </PaymentStyled>\n    </FoodGrid>\n    </>\n    );\n}"]},"metadata":{},"sourceType":"module"}