{"ast":null,"code":"import _toConsumableArray from\"/Users/KerrFamily/Desktop/FoodApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/KerrFamily/Desktop/FoodApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _taggedTemplateLiteral from\"/Users/KerrFamily/Desktop/FoodApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject7(){var data=_taggedTemplateLiteral([\"\\nmargin: 10px;\\ncolor: white;\\nheight: 20px;\\nborder-radius: 5px;\\npadding: 10px;\\ntext-align: center;\\nwidth: 200px;\\ncursor: pointer;\\nbackground-color: \",\";\\n\",\"\\n\"]);_templateObject7=function _templateObject7(){return data;};return data;}function _templateObject6(){var data=_taggedTemplateLiteral([\"\\nbox-shadow: 0px -2px 10px 0px grey;\\nheight: 60px;\\ndisplay: flex;\\njustify-content: center;\\n\"]);_templateObject6=function _templateObject6(){return data;};return data;}function _templateObject5(){var data=_taggedTemplateLiteral([\"\\noverflow: auto; \\nmin-height: 100px;\\npadding: 0px 40px;\\npadding-bottom: 80px;\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n    font-size: 30px;\\n    padding: 5px 40px;\\n    top: \",\";\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\nmin-height: 200px;\\nmargin-bottom: 20px;\\n\",\"\\nbackground-position: center;\\nbackground-size: cover;\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n    position: fixed;\\n    height: 100%;\\n    width: 100%;\\n    top: 0px;\\n    background-color: black;\\n    opacity: 0.7;\\n    z-index: 4;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n    width: 500px;\\n    background-color: white;\\n    position: fixed;\\n    top: 75px;\\n    z-index: 5;\\n    max-height: calc(100% - 100px);\\n    left: calc(50% - 250px);\\n    display: flex;\\n    flex-direction: column;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React from'react';import styled from'styled-components';import{FoodLabel}from\"../Menu/FoodGrid\";import{seaBlue}from'../Styles/colors';import{Title}from'../Styles/title';import{formatPrice}from\"../Data/FoodData\";import{QuantityInput}from\"./QuantityInput\";import{useQuantity}from\"../Hooks/useQuantity\";import{Toppings}from\"./Toppings\";import{useToppings}from\"../Hooks/useToppings\";import{useChoice}from\"../Hooks/useChoice\";import{Choices}from\"./Choices\";import{addItem,updateItem}from\"../Cart/carthelper\";import{API}from\"../config\";export var Dialog=styled.div(_templateObject());var DialogShadow=styled.div(_templateObject2());var DialogBanner=styled.div(_templateObject3(),function(_ref){var img=_ref.img;return img?\"background-image: url(\".concat(img,\");\"):\"min-height: 75px;\";});var DialogBannerName=styled(FoodLabel)(_templateObject4(),function(_ref2){var img=_ref2.img;return img?\"100px\":\"20px\";});function refreshPage(){window.location.reload(false);}var pricePerTopping=0.5;export function getPrice(order){return order.quantity*(order.price+order.toppings.filter(function(t){return t.checked;}).length*pricePerTopping);}//overflow auto adds the scroll bar to the dialog content area if needed\nexport var DialogContent=styled.div(_templateObject5());export var DialogFooter=styled.div(_templateObject6());export var ConfirmButton=styled(Title)(_templateObject7(),seaBlue,function(_ref3){var disabled=_ref3.disabled;return disabled&&\"\\nopacity: .5;\\nbackground-color: grey;\\npointer-events: none;\\n\";});function hasToppings(food){return food.category.name==='Pizza';}function FoodDialogContainer(_ref4){var openFood=_ref4.openFood,setOpenFood=_ref4.setOpenFood,setOrders=_ref4.setOrders,orders=_ref4.orders;var quantity=useQuantity(openFood&&openFood.quantity);var toppings=useToppings(openFood.toppings);var choiceRadio=useChoice(openFood.choice);var isEditing=openFood.index>-1;function close(){setOpenFood();}var order=_objectSpread(_objectSpread({},openFood),{},{quantity:quantity.value,toppings:toppings.toppings,choice:choiceRadio.value});function editOrder(){var newOrders=_toConsumableArray(orders);newOrders[order.index]=order;updateItem(newOrders[order.index]._id,quantity);//not working\nsetOrders(newOrders);close();refreshPage();};function addToOrder(){setOrders([].concat(_toConsumableArray(orders),[order]));addItem(order);console.log(order);close();refreshPage();}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(DialogShadow,{onClick:close}),/*#__PURE__*/React.createElement(Dialog,null,/*#__PURE__*/React.createElement(DialogBanner,{img:\"\".concat(API,\"/product/photo/\").concat(openFood._id)},/*#__PURE__*/React.createElement(DialogBannerName,null,openFood.name)),/*#__PURE__*/React.createElement(DialogContent,null,/*#__PURE__*/React.createElement(QuantityInput,{quantity:quantity}),hasToppings(openFood)&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h3\",null,\"Add Toppings:\"),/*#__PURE__*/React.createElement(Toppings,toppings)),openFood.choices&&/*#__PURE__*/React.createElement(Choices,{openFood:openFood,choiceRadio:choiceRadio})),/*#__PURE__*/React.createElement(DialogFooter,null,/*#__PURE__*/React.createElement(ConfirmButton,{onClick:isEditing?editOrder:addToOrder,disabled:openFood.choices&&!choiceRadio.value},isEditing?\"Update order\":\"Add to order: \",formatPrice(getPrice(order))))));}export function FoodDialog(props){if(!props.openFood)return null;return/*#__PURE__*/React.createElement(FoodDialogContainer,props);}","map":{"version":3,"sources":["/Users/KerrFamily/Desktop/FoodApp/src/FoodDialog/FoodDialog.js"],"names":["React","styled","FoodLabel","seaBlue","Title","formatPrice","QuantityInput","useQuantity","Toppings","useToppings","useChoice","Choices","addItem","updateItem","API","Dialog","div","DialogShadow","DialogBanner","img","DialogBannerName","refreshPage","window","location","reload","pricePerTopping","getPrice","order","quantity","price","toppings","filter","t","checked","length","DialogContent","DialogFooter","ConfirmButton","disabled","hasToppings","food","category","name","FoodDialogContainer","openFood","setOpenFood","setOrders","orders","choiceRadio","choice","isEditing","index","close","value","editOrder","newOrders","_id","addToOrder","console","log","choices","FoodDialog","props"],"mappings":"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","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport {FoodLabel} from \"../Menu/FoodGrid\";\nimport {seaBlue} from '../Styles/colors';\nimport {Title} from '../Styles/title';\nimport {formatPrice} from \"../Data/FoodData\";\nimport {QuantityInput} from \"./QuantityInput\";\nimport {useQuantity} from \"../Hooks/useQuantity\";\nimport {Toppings} from \"./Toppings\";\nimport {useToppings} from \"../Hooks/useToppings\";\nimport {useChoice} from \"../Hooks/useChoice\";\nimport {Choices} from \"./Choices\";\nimport {addItem, updateItem} from \"../Cart/carthelper\";\nimport {API} from \"../config\";\n\nexport const Dialog = styled.div`\n    width: 500px;\n    background-color: white;\n    position: fixed;\n    top: 75px;\n    z-index: 5;\n    max-height: calc(100% - 100px);\n    left: calc(50% - 250px);\n    display: flex;\n    flex-direction: column;\n`;\nconst DialogShadow = styled.div`\n    position: fixed;\n    height: 100%;\n    width: 100%;\n    top: 0px;\n    background-color: black;\n    opacity: 0.7;\n    z-index: 4;\n`;\n\nconst DialogBanner = styled.div`\nmin-height: 200px;\nmargin-bottom: 20px;\n${({img}) => (img ? `background-image: url(${img});` : `min-height: 75px;`)}\nbackground-position: center;\nbackground-size: cover;\n`;\n\nconst DialogBannerName = styled(FoodLabel)`\n    font-size: 30px;\n    padding: 5px 40px;\n    top: ${({img}) => (img ? `100px` : `20px`)};\n`;\n\nfunction refreshPage() {\n    window.location.reload(false);\n  }\n\nconst pricePerTopping = 0.5;\n\nexport function getPrice(order){\n    return order.quantity * (order.price + order.toppings.filter(t => t.checked).length * pricePerTopping);\n}\n//overflow auto adds the scroll bar to the dialog content area if needed\nexport const DialogContent = styled.div`\noverflow: auto; \nmin-height: 100px;\npadding: 0px 40px;\npadding-bottom: 80px;\n`;\n\nexport const DialogFooter = styled.div`\nbox-shadow: 0px -2px 10px 0px grey;\nheight: 60px;\ndisplay: flex;\njustify-content: center;\n`;\n\nexport const ConfirmButton = styled(Title)`\nmargin: 10px;\ncolor: white;\nheight: 20px;\nborder-radius: 5px;\npadding: 10px;\ntext-align: center;\nwidth: 200px;\ncursor: pointer;\nbackground-color: ${seaBlue};\n${({disabled}) => disabled &&\n`\nopacity: .5;\nbackground-color: grey;\npointer-events: none;\n`}\n`;\n\nfunction hasToppings(food){\n    return food.category.name === 'Pizza';\n}\n\nfunction FoodDialogContainer({openFood, setOpenFood, setOrders, orders}){\n    const quantity = useQuantity (openFood && openFood.quantity);\n    const toppings = useToppings(openFood.toppings);\n    const choiceRadio = useChoice(openFood.choice);\n    const isEditing = openFood.index > -1;\n\n    function close() {\n        setOpenFood();\n    }\n\n    const order ={\n        ...openFood,\n        quantity: quantity.value,\n        toppings: toppings.toppings,\n        choice: choiceRadio.value,\n    };\n\n    function editOrder(){\n        const newOrders = [...orders];\n        newOrders[order.index] = order;\n        updateItem(newOrders[order.index]._id, quantity);//not working\n        setOrders(newOrders);\n        close();\n        refreshPage();\n    };\n\n    function addToOrder(){\n        setOrders([...orders, order]);\n        addItem(order);\n        console.log(order);\n        close();\n        refreshPage();\n    }\n    return (\n    <>\n    <DialogShadow onClick={close}/>\n    <Dialog> \n    <DialogBanner img={`${API}/product/photo/${openFood._id}`}>\n        <DialogBannerName>{openFood.name}</DialogBannerName>\n    </DialogBanner>\n    <DialogContent>\n        <QuantityInput quantity={quantity}/>\n        {hasToppings(openFood) && (\n        <>\n            <h3>Add Toppings:</h3>\n            <Toppings {...toppings}/>\n        </>)}\n        {openFood.choices && <Choices openFood={openFood} choiceRadio={choiceRadio}/>}\n        \n    </DialogContent>\n    <DialogFooter>\n    <ConfirmButton \n    onClick={isEditing ? editOrder : addToOrder}\n    disabled={openFood.choices && !choiceRadio.value}>\n        {isEditing ? `Update order` : `Add to order: `}{formatPrice(getPrice(order))}</ConfirmButton>\n    </DialogFooter>\n    </Dialog>\n    </>\n    );\n}\n\nexport function FoodDialog(props){\n    if(!props.openFood) return null;\n    return <FoodDialogContainer {...props}/>\n}"]},"metadata":{},"sourceType":"module"}