{"ast":null,"code":"var _jsxFileName = \"/Users/KerrFamily/Desktop/FoodApp/src/user/CheckoutStyled.js\";\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { formatPrice } from \"../Data/FoodData\";\nimport { API } from \"../config\";\nimport { isAuthenticated } from '../auth';\nimport { useOpenFood } from \"../Hooks/useOpenFood\";\nimport { useOrders } from \"../Hooks/useOrders\";\nimport { useTitle } from \"../Hooks/useTitle\";\nimport { DialogContent, DialogFooter, DialogBanner, DialogBannerName, ConfirmButton } from \"../FoodDialog/FoodDialog\";\nimport { FoodLabel } from \"../Menu/FoodGrid\";\nimport { getCart, emptyCart } from \"../Cart/carthelper\";\nimport { getBraintreeClientToken, processPayment, createOrder } from \"../admin/adminApi\";\nimport { Link } from \"react-router-dom\";\nimport DropIn from 'braintree-web-drop-in-react';\nimport { getPrice } from \"../FoodDialog/FoodDialog\";\nexport const FoodGrid = styled.div`\ndisplay: grid;\nwidth: 1000px;\ngrid-template-columns: 1fr 1fr 1fr;\ngap: 20px;\npadding-bottom: 40px;\n`;\nconst CartStyled = styled.div`\ntop: 300px;\nwidth: 600px;\nbackground-color: white;\nheight: 600px;\nz-index: 10;\nbox-shadow: 4px 0px 5px 4px grey;\ndisplay: flex;\nflex-direction: column;\n`;\nconst CartContent = styled(DialogContent)`\npadding: 20px;\nheight: 100%\n`;\nconst CartContainer = styled.div`\n    padding: 10px 0px;\n    border-bottom: 1px solid grey;\n    ${({\n  editable\n}) => editable ? `\n&:hover {\n    cursor: pointer;\n    background-color: #e7e7e7;\n}\n` : `\n    pointer-events: none;\n    `}\n`;\nconst CartItem = styled.div`\n    padding: 10px 0px;\n    display: grid;\n    grid-template-columns: 20px 150px 20px 60px;\n    justify-content: space-between;\n`;\nexport const CartBanner = styled.div`\nmin-height: 50px;\nmargin-bottom: 20px;\nbackground-image: url(\"img/shark.jpeg\");\nbackground-position: center;\nbackground-size: cover;\n`;\nexport const CartBannerName = styled(FoodLabel)`\n    font-size: 25px;\n    padding: 5px 20px;\n    \n`;\nconst DetailItem = styled.div`\n    color: gray;\n    font-size: 10px;\n`;\nconst PaymentStyled = styled.div`\n    height: 600px;\n    width: 600px;\n    z-index: 10;\nbox-shadow: 4px 0px 5px 4px grey;\ndisplay: flex;\nflex-direction: column;\n`;\nconst ShippingBox = styled.div`\n    height: 400px;\n    width: 500px;\n    z-index: 10;\nbox-shadow: 4px 0px 5px 4px grey;\ndisplay: flex;\nflex-direction: column;\n`;\nexport function CheckoutStyled() {\n  const openFood = useOpenFood();\n  const orders = useOrders();\n  useTitle({ ...openFood,\n    ...orders\n  });\n  const [items, setItems] = useState([]);\n  const [run, setRun] = useState(false);\n  const subtotal = items.reduce((total, items) => {\n    return total + getPrice(items);\n  }, 0);\n  const displaySubtotal = subtotal.toFixed(2);\n  const tax = subtotal * 0.07;\n  const displayTax = tax.toFixed(2);\n  const processingFeeN = (tax + subtotal) * 0.05;\n  const displayProcessingFee = processingFeeN.toFixed(2);\n  const total = subtotal + tax + processingFeeN;\n  const displayTotal = total.toFixed(2);\n  const [values, setValues] = useState({\n    success: false,\n    clientToken: null,\n    error: '',\n    instance: {},\n    user: \"\",\n    orderItems: \"\",\n    ShipName: \"\",\n    ShipEmail: \"\",\n    ShipAddress: \"\",\n    ShipCity: \"\",\n    ShipState: \"\",\n    ShipZip: \"\",\n    method: \"\",\n    subTotal: \"\",\n    taxPrice: \"\",\n    processingFee: \"\",\n    totalPrice: \"\"\n  });\n  const {\n    success,\n    orderItems,\n    ShipName,\n    ShipEmail,\n    shipAddress,\n    shipCity,\n    shipState,\n    shipZip,\n    method,\n    subTotal,\n    processingFee,\n    taxPrice,\n    totalPrice\n  } = values;\n  useEffect(() => {\n    setItems(getCart());\n  }, [run]);\n\n  const showItems = items => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      onBlur: () => setValues({ ...values,\n        error: \"\"\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }), items.map((product, i) => /*#__PURE__*/React.createElement(DetailItem, {\n      key: i,\n      items: product,\n      setRun: setRun,\n      run: run,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    }, product.name, \" \", \" Qty: \", \" \", product.quantity, \" \", \" \", \" \", product.topping, \" $\", product.price)));\n  };\n\n  const userId = isAuthenticated() && isAuthenticated().user._id;\n\n  const token = isAuthenticated() && isAuthenticated().token;\n\n  const getToken = (userId, token) => {\n    getBraintreeClientToken(userId, token).then(values => {\n      if (values.error) {\n        setValues({ ...values,\n          error: values.error\n        });\n      } else {\n        setValues({\n          clientToken: values.clientToken\n        });\n      }\n    });\n  };\n\n  useEffect(() => {\n    getToken(userId, token);\n  }, []);\n\n  const buy = () => {\n    // send nonce to your server\n    //nonce= values.instance.requestPaymentMethod()\n    let nonce;\n    let getNonce = values.instance.requestPaymentMethod().then(values => {\n      // console.log(values)\n      nonce = values.nonce; //once you have nonce (card type, card number) send nonce as \"paymentMethodNonce\"\n      //and also total to be charged\n      //console.log('send nonce and total to process: ', nonce, total)\n\n      const paymentData = {\n        paymentMethodNonce: nonce,\n        amount: displayTotal\n      };\n      processPayment(userId, token, paymentData).then(response => {\n        console.log(values); //empty cart & create order\n\n        const createOrderData = {\n          orderItems: items,\n          shipName: shipName,\n          shipEmail: shipEmail,\n          shipAddress: shipAddress,\n          shipCity: shipCity,\n          shipState: shipState,\n          shipZip: shipZip,\n          method: method,\n          subTotal: displaySubtotal,\n          taxPrice: displayTax,\n          processingFee: displayProcessingFee,\n          totalPrice: displayTotal\n        };\n        createOrder(userId, token, createOrderData).then(response => {\n          emptyCart(() => {\n            console.log('payment success and empty cart');\n            setValues({\n              success: true\n            });\n          });\n        }).catch(error => console.log(error));\n      });\n    }).catch(error => {\n      console.log('drop in error: ', error);\n      setValues({ ...values,\n        error: error.message\n      }); //empty cart\n      //create order\n    });\n  };\n\n  const showError = error => /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: values.error ? '' : 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 9\n    }\n  }, error);\n\n  const showSuccess = success => /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: success ? '' : 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 9\n    }\n  }, \"Thanks! Your payment was successful!\");\n\n  const showDropIn = () => /*#__PURE__*/React.createElement(\"div\", {\n    onBlur: () => setValues({ ...values,\n      error: ''\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 9\n    }\n  }, values.clientToken !== null && items.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(DropIn, {\n    options: {\n      authorization: values.clientToken,\n      paypal: {\n        flow: 'vault'\n      }\n    },\n    onInstance: instance => values.instance = instance,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: buy,\n    className: \"btn-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 21\n    }\n  }, \"Pay\")) : null);\n\n  const handleChange = name => event => {\n    const value = name === 'name' ? event.target.files[0] : event.target.value;\n    setValues({ ...values,\n      [name]: value\n    });\n  };\n\n  const clickSubmit = event => {\n    event.preventDefault();\n    setValues({ ...values\n    });\n    console.log(values);\n  };\n\n  const handleMethod = event => {\n    setValues({ ...values,\n      method: event.target.value\n    });\n    console.log(values);\n  };\n\n  let methodSelection = values.method;\n\n  const shippingMethod = () => /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 25\n    }\n  }, \"Method Type:\"), /*#__PURE__*/React.createElement(\"select\", {\n    className: \"form-control\",\n    onChange: handleMethod,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 17\n    }\n  }, \"Select Method\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 17\n    }\n  }, \"Pick Up\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 17\n    }\n  }, \"Delivery\")));\n\n  const shippingForm = () => /*#__PURE__*/React.createElement(\"form\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 17\n    }\n  }, \"Name: \"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('shipName'),\n    type: \"text\",\n    className: \"form-control\",\n    value: shipName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 17\n    }\n  }, \"Email: \"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('shipEmail'),\n    type: \"text\",\n    className: \"form-control\",\n    value: shipEmail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 17\n    }\n  }, \"Address: \"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('shipAddress'),\n    type: \"text\",\n    className: \"form-control\",\n    value: shipAddress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 17\n    }\n  }, \"City: \"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('shipCity'),\n    type: \"text\",\n    className: \"form-control\",\n    value: shipCity,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 17\n    }\n  }, \"State: \"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('shipState'),\n    type: \"text\",\n    className: \"form-control\",\n    value: shipState,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 17\n    }\n  }, \"Zip: \"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('shipZip'),\n    type: \"text\",\n    className: \"form-control\",\n    value: shipZip,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 17\n    }\n  })));\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FoodGrid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CartStyled, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CartContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CartBanner, {\n    img: `${API}/product/photo/shark.jpeg`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CartBannerName, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 9\n    }\n  }, \"Summary, your cart has \", `${items.length}`, \" items.\")), /*#__PURE__*/React.createElement(CartContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 9\n    }\n  }, showItems(items), /*#__PURE__*/React.createElement(DetailItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 13\n    }\n  }, \"Sub-Total: \", formatPrice(subtotal), \" \"), /*#__PURE__*/React.createElement(DetailItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 13\n    }\n  }, \"Tax: \", formatPrice(tax), \" \"), /*#__PURE__*/React.createElement(DetailItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 13\n    }\n  }, \"Processing Fee: \", formatPrice(processingFeeN), \" \"), /*#__PURE__*/React.createElement(DetailItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 13\n    }\n  }, \"Total: \", formatPrice(total), \" \")))), /*#__PURE__*/React.createElement(PaymentStyled, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CartBanner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CartBannerName, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 5\n    }\n  }, \"Delivery Address\")), shippingMethod(), shippingForm(), /*#__PURE__*/React.createElement(CartBanner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CartBannerName, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 13\n    }\n  }, \"Payment Method\")), showSuccess(values.success), showError(values.error), showDropIn())));\n}","map":{"version":3,"sources":["/Users/KerrFamily/Desktop/FoodApp/src/user/CheckoutStyled.js"],"names":["React","useState","useEffect","styled","formatPrice","API","isAuthenticated","useOpenFood","useOrders","useTitle","DialogContent","DialogFooter","DialogBanner","DialogBannerName","ConfirmButton","FoodLabel","getCart","emptyCart","getBraintreeClientToken","processPayment","createOrder","Link","DropIn","getPrice","FoodGrid","div","CartStyled","CartContent","CartContainer","editable","CartItem","CartBanner","CartBannerName","DetailItem","PaymentStyled","ShippingBox","CheckoutStyled","openFood","orders","items","setItems","run","setRun","subtotal","reduce","total","displaySubtotal","toFixed","tax","displayTax","processingFeeN","displayProcessingFee","displayTotal","values","setValues","success","clientToken","error","instance","user","orderItems","ShipName","ShipEmail","ShipAddress","ShipCity","ShipState","ShipZip","method","subTotal","taxPrice","processingFee","totalPrice","shipAddress","shipCity","shipState","shipZip","showItems","map","product","i","name","quantity","topping","price","userId","_id","token","getToken","then","buy","nonce","getNonce","requestPaymentMethod","paymentData","paymentMethodNonce","amount","response","console","log","createOrderData","shipName","shipEmail","catch","message","showError","display","showSuccess","showDropIn","length","authorization","paypal","flow","handleChange","event","value","target","files","clickSubmit","preventDefault","handleMethod","methodSelection","shippingMethod","shippingForm"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport styled from 'styled-components';\nimport {formatPrice} from \"../Data/FoodData\";\nimport {API} from \"../config\";\nimport {isAuthenticated} from '../auth';\nimport {useOpenFood} from \"../Hooks/useOpenFood\";\nimport {useOrders} from \"../Hooks/useOrders\";\nimport {useTitle} from \"../Hooks/useTitle\";\nimport {DialogContent, DialogFooter, DialogBanner, DialogBannerName, ConfirmButton} from \"../FoodDialog/FoodDialog\";\nimport {FoodLabel} from \"../Menu/FoodGrid\";\nimport {getCart, emptyCart} from \"../Cart/carthelper\";\nimport {getBraintreeClientToken, processPayment, createOrder} from \"../admin/adminApi\";\nimport {Link} from \"react-router-dom\";\nimport DropIn from 'braintree-web-drop-in-react';\nimport {getPrice} from \"../FoodDialog/FoodDialog\";\n\nexport const FoodGrid = styled.div`\ndisplay: grid;\nwidth: 1000px;\ngrid-template-columns: 1fr 1fr 1fr;\ngap: 20px;\npadding-bottom: 40px;\n`;\n\n\nconst CartStyled = styled.div`\ntop: 300px;\nwidth: 600px;\nbackground-color: white;\nheight: 600px;\nz-index: 10;\nbox-shadow: 4px 0px 5px 4px grey;\ndisplay: flex;\nflex-direction: column;\n`;\n\nconst CartContent = styled(DialogContent)`\npadding: 20px;\nheight: 100%\n`;\n\nconst CartContainer = styled.div`\n    padding: 10px 0px;\n    border-bottom: 1px solid grey;\n    ${({editable}) =>\neditable ? `\n&:hover {\n    cursor: pointer;\n    background-color: #e7e7e7;\n}\n`\n    : `\n    pointer-events: none;\n    `}\n`;\n\nconst CartItem = styled.div`\n    padding: 10px 0px;\n    display: grid;\n    grid-template-columns: 20px 150px 20px 60px;\n    justify-content: space-between;\n`;\nexport const CartBanner = styled.div`\nmin-height: 50px;\nmargin-bottom: 20px;\nbackground-image: url(\"img/shark.jpeg\");\nbackground-position: center;\nbackground-size: cover;\n`;\nexport const CartBannerName = styled(FoodLabel)`\n    font-size: 25px;\n    padding: 5px 20px;\n    \n`;\n\nconst DetailItem = styled.div`\n    color: gray;\n    font-size: 10px;\n`\n\nconst PaymentStyled = styled.div`\n    height: 600px;\n    width: 600px;\n    z-index: 10;\nbox-shadow: 4px 0px 5px 4px grey;\ndisplay: flex;\nflex-direction: column;\n`\nconst ShippingBox = styled.div`\n    height: 400px;\n    width: 500px;\n    z-index: 10;\nbox-shadow: 4px 0px 5px 4px grey;\ndisplay: flex;\nflex-direction: column;\n`\n\n\nexport function CheckoutStyled(){ \n    const openFood = useOpenFood();\n    const orders = useOrders();\n    useTitle({...openFood, ...orders});\n    const [items, setItems] = useState([]);\n    const [run, setRun] = useState(false);\n    const subtotal = items.reduce((total, items) => {\n        return total + getPrice(items);\n    }, 0);\n    const displaySubtotal = subtotal.toFixed(2);\n    const tax = subtotal * 0.07;\n    const displayTax = tax.toFixed(2);\n    const processingFeeN = (tax + subtotal) * 0.05;\n    const displayProcessingFee = processingFeeN.toFixed(2);\n    const total = subtotal + tax + processingFeeN;\n    const displayTotal = total.toFixed(2);\n    const [values, setValues] = useState(\n        {\n    success: false,\n    clientToken: null,\n    error: '',\n    instance: {},\n    user: \"\",\n    orderItems: \"\",\n    ShipName: \"\",\n    ShipEmail: \"\",\n    ShipAddress: \"\",\n    ShipCity: \"\",\n    ShipState: \"\",\n    ShipZip: \"\",\n    method: \"\",\n    subTotal: \"\",\n    taxPrice: \"\",\n    processingFee:\"\",\n    totalPrice: \"\",\n        }\n    );\n\n    const {success, orderItems, ShipName, ShipEmail, shipAddress, shipCity, shipState, shipZip, method, subTotal, processingFee, taxPrice, totalPrice} = values;\n\n    useEffect(()=> {\n        setItems(getCart());\n    }, [run]);\n    \n    const showItems = items => {\n        return(\n            <div onBlur={()=> setValues({...values, error:\"\"})}>\n                <hr/>\n                {items.map((product, i)=> (\n                <DetailItem \n                key ={i} \n                items={product}\n                setRun={setRun}\n                run={run}\n                >{product.name} {\" Qty: \"} {product.quantity} {\" \"} {product.topping}{\" $\"}{product.price}</DetailItem>\n                ))\n                }\n            </div>\n        );\n    };\n\n    const userId = isAuthenticated() && isAuthenticated().user._id;\n    const token = isAuthenticated() && isAuthenticated().token;\n\n    const getToken = (userId, token) => {\n        getBraintreeClientToken(userId, token).then(values => {\n            if(values.error) {\n                setValues({...values, error: values.error})\n            }else{\n                setValues({clientToken: values.clientToken})\n            }\n        })\n    };\n\n    useEffect(()=>{\n        getToken(userId, token)\n    }, []);\n\n    const buy= () => {\n        // send nonce to your server\n        //nonce= values.instance.requestPaymentMethod()\n        let nonce;\n        let getNonce = values.instance\n        .requestPaymentMethod()\n        .then( values => {\n           // console.log(values)\n            nonce = values.nonce;\n            //once you have nonce (card type, card number) send nonce as \"paymentMethodNonce\"\n            //and also total to be charged\n            //console.log('send nonce and total to process: ', nonce, total)\n        const paymentData ={\n            paymentMethodNonce: nonce,\n            amount: displayTotal\n        }\n\n        processPayment(userId, token, paymentData)\n        .then(response=> {\n            console.log(values);\n                //empty cart & create order\n\n               const createOrderData = {\n                    orderItems: items,\n                    shipName: shipName,\n                    shipEmail: shipEmail,\n                    shipAddress: shipAddress,\n                    shipCity: shipCity,\n                    shipState: shipState,\n                    shipZip: shipZip,\n                    method: method,\n                    subTotal: displaySubtotal,\n                    taxPrice: displayTax,\n                    processingFee: displayProcessingFee,\n                    totalPrice: displayTotal\n                };\n\n                createOrder(userId, token, createOrderData)\n                .then(response => {\n                    emptyCart(() => {\n                        console.log('payment success and empty cart');\n                        setValues({\n                            success: true\n                        });\n                    });\n                })\n                .catch(error => console.log(error));\n        });\n    })\n    .catch(error => {\n            console.log('drop in error: ', error)\n            setValues({...values, error: error.message});\n            //empty cart\n            //create order\n        });\n    };\n\n    const showError = error => (\n        <div style={{ display: values.error ? '' : 'none' }}>\n            {error}\n        </div>\n    );\n\n    const showSuccess = success => (\n        <div style={{ display: success ? '' : 'none' }}>\n            Thanks! Your payment was successful!\n        </div>\n    );\n\n    const showDropIn= () => (\n        <div onBlur={() => setValues({ ...values, error: '' })}>\n            \n            {values.clientToken !== null && items.length>0 ? (\n                <div>\n                    <DropIn\n                        options={{\n                            authorization: values.clientToken,\n                            paypal: {\n                                flow: 'vault'\n                            }\n                        }}\n                        onInstance={instance => (values.instance = instance)}\n                    />\n                    <button onClick={buy} className=\"btn-block\">\n                        Pay\n                    </button>\n                </div>\n            ) : null}\n        </div>\n    );\n\n    const handleChange = name => event => {\n        const value = name === 'name' ? event.target.files[0]: event.target.value;\n        setValues({...values, [name]: value});\n    };\n\n    const clickSubmit = event => {\n        event.preventDefault();\n        setValues({...values});\n        console.log((values));\n     };\n\n     const handleMethod = event => {\n        setValues({...values, method: event.target.value });\n        console.log(values);\n    };\n\n    let methodSelection = values.method;\n\n    const shippingMethod = () => (\n        <div>\n                        <label>Method Type:</label>\n                        <select \n            className=\"form-control\" onChange={handleMethod}\n           >\n                <option>Select Method</option>\n                <option>Pick Up</option>\n                <option>Delivery</option>\n            </select>\n       </div>\n    )\n\n    const shippingForm = () => (\n        <form className=\"mb-3\">\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Name: </label>\n                <input onChange={handleChange('shipName')} type=\"text\" className=\"form-control\" value={shipName}/>\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Email: </label>\n                <input onChange={handleChange('shipEmail')} type=\"text\" className=\"form-control\" value={shipEmail}/>\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Address: </label>\n                <input onChange={handleChange('shipAddress')} type=\"text\" className=\"form-control\" value={shipAddress}/>\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">City: </label>\n                <input onChange={handleChange('shipCity')} type=\"text\" className=\"form-control\" value={shipCity}/>\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">State: </label>\n                <input onChange={handleChange('shipState')} type=\"text\" className=\"form-control\" value={shipState}/>\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Zip: </label>\n                <input onChange={handleChange('shipZip')} type=\"text\" className=\"form-control\" value={shipZip}/>\n            </div>\n            {/* <button className=\"btn btn-outline-primary\">Shipping</button> */}\n        </form>\n    );\n\n    return (\n        <>\n        <FoodGrid> \n        <CartStyled>\n    <CartContainer>\n    <CartBanner img={`${API}/product/photo/shark.jpeg`}>\n        <CartBannerName>Summary, your cart has {`${items.length}`} items.</CartBannerName>\n    </CartBanner>\n        <CartContent>\n            {showItems(items)}\n            <DetailItem>Sub-Total: {formatPrice(subtotal)} </DetailItem>\n            <DetailItem>Tax: {formatPrice(tax)} </DetailItem>           \n            <DetailItem>Processing Fee: {formatPrice(processingFeeN)} </DetailItem>\n            <DetailItem>Total: {formatPrice(total)} </DetailItem>\n        </CartContent>\n    </CartContainer>\n    </CartStyled>\n\n    <PaymentStyled>\n    <CartBanner>\n    <CartBannerName>Delivery Address</CartBannerName>\n    </CartBanner>\n        {shippingMethod()}\n        {shippingForm()}\n    <CartBanner>\n            <CartBannerName>Payment Method</CartBannerName></CartBanner>\n            {showSuccess(values.success)}\n            {showError(values.error)}\n            {showDropIn()}\n    </PaymentStyled>\n    </FoodGrid>\n    </>\n    );\n}"]},"metadata":{},"sourceType":"module"}