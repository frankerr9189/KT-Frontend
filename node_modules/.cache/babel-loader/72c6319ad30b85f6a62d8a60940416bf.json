{"ast":null,"code":"var _jsxFileName = \"/Users/KerrFamily/Desktop/FoodApp/src/Order/Order.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Redirect, Link } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { DialogContent, DialogFooter, ConfirmButton } from \"../FoodDialog/FoodDialog\";\nimport { formatPrice } from \"../Data/FoodData\";\nimport { getPrice } from \"../FoodDialog/FoodDialog\";\nimport { removeItem, getCart, addItem, emptyCart, addSubtotal } from \"../Cart/carthelper\";\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { signin, authenticate, isAuthenticated, guest } from '../auth';\nconst StyledTableCell = withStyles(theme => ({\n  head: {\n    backgroundColor: theme.palette.common.black,\n    color: theme.palette.common.white\n  },\n  body: {\n    fontSize: 14\n  }\n}))(TableCell);\nconst StyledTableRow = withStyles(theme => ({\n  root: {\n    '&:nth-of-type(odd)': {\n      backgroundColor: theme.palette.action.hover\n    }\n  }\n}))(TableRow);\nconst useStyles = makeStyles({\n  table: {\n    minWidth: 700\n  }\n});\nconst OrderStyled = styled.div`\nposition: fixed;\nright: 0px;\ntop: 57px;\nwidth: 340px;\nbackground-color: white;\nheight: calc(100% - 48px);\nz-index: 10;\nbox-shadow: 4px 0px 5px 4px grey;\ndisplay: flex;\nflex-direction: column;\n`;\nconst OrderContent = styled(DialogContent)`\npadding: 20px;\nheight: 100%\n`;\nconst OrderContainer = styled.div`\n    padding: 10px 0px;\n    border-bottom: 1px solid grey;\n    ${({\n  editable\n}) => editable ? `\n&:hover {\n    cursor: pointer;\n    background-color: #e7e7e7;\n}\n` : `\n    pointer-events: none;\n    `}\n`;\nconst OrderItem = styled.div`\n    padding: 10px 0px;\n    display: grid;\n    grid-template-columns: 20px 150px 20px 60px;\n    justify-content: space-between;\n`;\nconst DetailItem = styled.div`\n    color: gray;\n    font-size: 10px;\n`;\n\nfunction refreshPage() {\n  window.location.reload(false);\n}\n\nexport function Order({\n  orders,\n  setOrders,\n  setOpenFood\n}) {\n  const [items, setItems] = useState([]);\n  const subtotal = items.reduce((total, order) => {\n    return total + getPrice(order);\n  }, 0);\n  const tax = subtotal * 0.07;\n  const processingFee = (tax + subtotal) * 0.05;\n  const total = subtotal + tax + processingFee;\n  const [run, setRun] = useState(false);\n  const [user, setUser] = useState({\n    email: \"guest@guest.com\",\n    password: \"Franslk1\",\n    error: \"\",\n    loading: false,\n    redirectToReferrer: false\n  });\n  const {\n    email,\n    password,\n    loading,\n    error,\n    redirectToReferrer\n  } = user;\n\n  const clickSubmit = event => {\n    event.preventDefault();\n    setUser({ ...user,\n      error: false,\n      loading: true\n    });\n    signin({\n      email,\n      password\n    }).then(data => {\n      if (data.error) {\n        setUser({ ...user,\n          error: data.error,\n          loading: false\n        });\n      } else {\n        authenticate(data, () => {\n          setUser({ ...user,\n            redirectToReferrer: true\n          });\n          refreshPage();\n        });\n      }\n    });\n  };\n\n  const redirectUser = () => {\n    if (redirectToReferrer) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/checkout\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 20\n        }\n      });\n    }\n  };\n\n  useEffect(() => {\n    setItems(getCart());\n    console.log(items);\n  }, [run]);\n\n  const deleteItem = index => {\n    const newOrders = [...orders];\n    newOrders.splice(index, 1);\n    setOrders(newOrders);\n  };\n\n  return /*#__PURE__*/React.createElement(OrderStyled, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 12\n    }\n  }, items.length === 0 ? /*#__PURE__*/React.createElement(OrderContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 26\n    }\n  }, \"Your cart is empty...\") : /*#__PURE__*/React.createElement(OrderContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }\n  }, \" \", /*#__PURE__*/React.createElement(OrderContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, \"You have \", items.length, \" item(s) in your cart.\"), \" \", items.map((order, index) => /*#__PURE__*/React.createElement(OrderContainer, {\n    editable: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(OrderItem, {\n    onClick: () => {\n      setOpenFood({ ...order,\n        index\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 25\n    }\n  }, order.quantity), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 25\n    }\n  }, order.name), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      cursor: 'pointer'\n    },\n    onClick: e => {\n      e.stopPropagation();\n      deleteItem(index);\n      removeItem(order._id);\n      refreshPage();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 25\n    }\n  }, \"\\uD83D\\uDDD1\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }\n  }, formatPrice(getPrice(order)))), /*#__PURE__*/React.createElement(DetailItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 21\n    }\n  }, order.toppings.filter(t => t.checked).map(topping => topping.name).join(\", \")), order.choice && /*#__PURE__*/React.createElement(DetailItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 38\n    }\n  }, order.choice))), /*#__PURE__*/React.createElement(OrderContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(OrderItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 21\n    }\n  }, \"Sub-Total:\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 21\n    }\n  }, formatPrice(subtotal))), /*#__PURE__*/React.createElement(OrderItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 21\n    }\n  }, \"Tax:\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 21\n    }\n  }, formatPrice(tax))), /*#__PURE__*/React.createElement(OrderItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 21\n    }\n  }, \"Processing Fee:\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 21\n    }\n  }, formatPrice(processingFee)))), /*#__PURE__*/React.createElement(OrderContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(OrderItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 21\n    }\n  }, \"Total\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 21\n    }\n  }, formatPrice(total))))), /*#__PURE__*/React.createElement(DialogFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ConfirmButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/checkout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 17\n    }\n  }, \"Checkout \")), /*#__PURE__*/React.createElement(ConfirmButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/checkout\",\n    onClick: clickSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 17\n    }\n  }, \"Guest Checkout \"), redirectUser())));\n}","map":{"version":3,"sources":["/Users/KerrFamily/Desktop/FoodApp/src/Order/Order.js"],"names":["React","useState","useEffect","Redirect","Link","styled","DialogContent","DialogFooter","ConfirmButton","formatPrice","getPrice","removeItem","getCart","addItem","emptyCart","addSubtotal","withStyles","makeStyles","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","signin","authenticate","isAuthenticated","guest","StyledTableCell","theme","head","backgroundColor","palette","common","black","color","white","body","fontSize","StyledTableRow","root","action","hover","useStyles","table","minWidth","OrderStyled","div","OrderContent","OrderContainer","editable","OrderItem","DetailItem","refreshPage","window","location","reload","Order","orders","setOrders","setOpenFood","items","setItems","subtotal","reduce","total","order","tax","processingFee","run","setRun","user","setUser","email","password","error","loading","redirectToReferrer","clickSubmit","event","preventDefault","then","data","redirectUser","console","log","deleteItem","index","newOrders","splice","length","map","quantity","name","cursor","e","stopPropagation","_id","toppings","filter","t","checked","topping","join","choice"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,SAAQC,QAAR,EAAkBC,IAAlB,QAA6B,kBAA7B;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAAQC,aAAR,EAAuBC,YAAvB,EAAqCC,aAArC,QAAyD,0BAAzD;AACA,SAAQC,WAAR,QAA0B,kBAA1B;AACA,SAAQC,QAAR,QAAuB,0BAAvB;AACA,SAAQC,UAAR,EAAoBC,OAApB,EAA6BC,OAA7B,EAAsCC,SAAtC,EAAiDC,WAAjD,QAAmE,oBAAnE;AACA,SAASC,UAAT,EAAqBC,UAArB,QAAuC,0BAAvC;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,cAAP,MAA2B,kCAA3B;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,SAAQC,MAAR,EAAgBC,YAAhB,EAA8BC,eAA9B,EAA+CC,KAA/C,QAA2D,SAA3D;AAEA,MAAMC,eAAe,GAAGZ,UAAU,CAAEa,KAAD,KAAY;AAC3CC,EAAAA,IAAI,EAAE;AACJC,IAAAA,eAAe,EAAEF,KAAK,CAACG,OAAN,CAAcC,MAAd,CAAqBC,KADlC;AAEJC,IAAAA,KAAK,EAAEN,KAAK,CAACG,OAAN,CAAcC,MAAd,CAAqBG;AAFxB,GADqC;AAK3CC,EAAAA,IAAI,EAAE;AACJC,IAAAA,QAAQ,EAAE;AADN;AALqC,CAAZ,CAAD,CAAV,CAQlBnB,SARkB,CAAxB;AAUE,MAAMoB,cAAc,GAAGvB,UAAU,CAAEa,KAAD,KAAY;AAC5CW,EAAAA,IAAI,EAAE;AACJ,0BAAsB;AACpBT,MAAAA,eAAe,EAAEF,KAAK,CAACG,OAAN,CAAcS,MAAd,CAAqBC;AADlB;AADlB;AADsC,CAAZ,CAAD,CAAV,CAMnBpB,QANmB,CAAvB;AAQA,MAAMqB,SAAS,GAAG1B,UAAU,CAAC;AAC3B2B,EAAAA,KAAK,EAAE;AACLC,IAAAA,QAAQ,EAAE;AADL;AADoB,CAAD,CAA5B;AAMF,MAAMC,WAAW,GAAGzC,MAAM,CAAC0C,GAAI;;;;;;;;;;;CAA/B;AAaA,MAAMC,YAAY,GAAG3C,MAAM,CAACC,aAAD,CAAgB;;;CAA3C;AAKA,MAAM2C,cAAc,GAAG5C,MAAM,CAAC0C,GAAI;;;MAG5B,CAAC;AAACG,EAAAA;AAAD,CAAD,KACNA,QAAQ,GAAI;;;;;CAAJ,GAMD;;KAED;CAZN;AAeA,MAAMC,SAAS,GAAG9C,MAAM,CAAC0C,GAAI;;;;;CAA7B;AAOA,MAAMK,UAAU,GAAG/C,MAAM,CAAC0C,GAAI;;;CAA9B;;AAKA,SAASM,WAAT,GAAuB;AACnBC,EAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,KAAvB;AACD;;AAEH,OAAO,SAASC,KAAT,CAAe;AAACC,EAAAA,MAAD;AAASC,EAAAA,SAAT;AAAoBC,EAAAA;AAApB,CAAf,EAAiD;AACpD,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoB7D,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM8D,QAAQ,GAAGF,KAAK,CAACG,MAAN,CAAa,CAACC,KAAD,EAAQC,KAAR,KAAkB;AAC5C,WAAOD,KAAK,GAAGvD,QAAQ,CAACwD,KAAD,CAAvB;AACH,GAFgB,EAEd,CAFc,CAAjB;AAGA,QAAMC,GAAG,GAAGJ,QAAQ,GAAG,IAAvB;AACA,QAAMK,aAAa,GAAG,CAACD,GAAG,GAAGJ,QAAP,IAAmB,IAAzC;AACA,QAAME,KAAK,GAAGF,QAAQ,GAAGI,GAAX,GAAiBC,aAA/B;AACA,QAAM,CAACC,GAAD,EAAMC,MAAN,IAAgBrE,QAAQ,CAAC,KAAD,CAA9B;AACA,QAAM,CAACsE,IAAD,EAAOC,OAAP,IAAkBvE,QAAQ,CAAC;AAC7BwE,IAAAA,KAAK,EAAE,iBADsB;AAE7BC,IAAAA,QAAQ,EAAE,UAFmB;AAG7BC,IAAAA,KAAK,EAAE,EAHsB;AAI7BC,IAAAA,OAAO,EAAE,KAJoB;AAK7BC,IAAAA,kBAAkB,EAAE;AALS,GAAD,CAAhC;AAQA,QAAM;AAACJ,IAAAA,KAAD;AAAQC,IAAAA,QAAR;AAAkBE,IAAAA,OAAlB;AAA2BD,IAAAA,KAA3B;AAAkCE,IAAAA;AAAlC,MAAwDN,IAA9D;;AAEA,QAAMO,WAAW,GAAGC,KAAK,IAAI;AACzBA,IAAAA,KAAK,CAACC,cAAN;AACAR,IAAAA,OAAO,CAAC,EAAC,GAAGD,IAAJ;AAAUI,MAAAA,KAAK,EAAE,KAAjB;AAAwBC,MAAAA,OAAO,EAAE;AAAjC,KAAD,CAAP;AACApD,IAAAA,MAAM,CAAC;AAACiD,MAAAA,KAAD;AAAQC,MAAAA;AAAR,KAAD,CAAN,CACCO,IADD,CACMC,IAAI,IAAI;AACV,UAAGA,IAAI,CAACP,KAAR,EAAe;AACXH,QAAAA,OAAO,CAAC,EAAC,GAAGD,IAAJ;AAAUI,UAAAA,KAAK,EAAEO,IAAI,CAACP,KAAtB;AAA6BC,UAAAA,OAAO,EAAE;AAAtC,SAAD,CAAP;AACH,OAFD,MAEO;AACHnD,QAAAA,YAAY,CAACyD,IAAD,EAAO,MAAM;AACrBV,UAAAA,OAAO,CAAC,EACJ,GAAGD,IADC;AAEJM,YAAAA,kBAAkB,EAAE;AAFhB,WAAD,CAAP;AAIAxB,UAAAA,WAAW;AACd,SANW,CAAZ;AAOH;AACJ,KAbD;AAcH,GAjBD;;AAmBA,QAAM8B,YAAY,GAAG,MAAM;AACvB,QAAGN,kBAAH,EAAsB;AAClB,0BAAO,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACH;AACJ,GAJD;;AAMA3E,EAAAA,SAAS,CAAC,MAAK;AACX4D,IAAAA,QAAQ,CAAClD,OAAO,EAAR,CAAR;AACAwE,IAAAA,OAAO,CAACC,GAAR,CAAYxB,KAAZ;AACH,GAHQ,EAGN,CAACQ,GAAD,CAHM,CAAT;;AAKA,QAAMiB,UAAU,GAAGC,KAAD,IAAW;AACzB,UAAMC,SAAS,GAAG,CAAC,GAAG9B,MAAJ,CAAlB;AACA8B,IAAAA,SAAS,CAACC,MAAV,CAAiBF,KAAjB,EAAwB,CAAxB;AACA5B,IAAAA,SAAS,CAAC6B,SAAD,CAAT;AAEH,GALD;;AAOA,sBAAO,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACN3B,KAAK,CAAC6B,MAAN,KAAiB,CAAjB,gBAAoB,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAApB,gBAEG,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACK,GADL,eAEI,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACU7B,KAAK,CAAC6B,MADhB,2BAFJ,EAKK,GALL,EAMK7B,KAAK,CAAC8B,GAAN,CAAU,CAACzB,KAAD,EAAQqB,KAAR,kBACP,oBAAC,cAAD;AAAgB,IAAA,QAAQ,MAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,SAAD;AACA,IAAA,OAAO,EAAE,MAAM;AACX3B,MAAAA,WAAW,CAAC,EAAC,GAAGM,KAAJ;AAAWqB,QAAAA;AAAX,OAAD,CAAX;AAEH,KAJD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAMrB,KAAK,CAAC0B,QAAZ,CANJ,eAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAM1B,KAAK,CAAC2B,IAAZ,CAPJ,eAQI;AACA,IAAA,KAAK,EAAE;AAACC,MAAAA,MAAM,EAAE;AAAT,KADP;AAEA,IAAA,OAAO,EAAEC,CAAC,IAAG;AACTA,MAAAA,CAAC,CAACC,eAAF;AACAV,MAAAA,UAAU,CAACC,KAAD,CAAV;AAAkB5E,MAAAA,UAAU,CAACuD,KAAK,CAAC+B,GAAP,CAAV;AAAsB5C,MAAAA,WAAW;AAAG,KAJ1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBARJ,eAaR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAM5C,WAAW,CAACC,QAAQ,CAACwD,KAAD,CAAT,CAAjB,CAbQ,CADJ,eAgBI,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKA,KAAK,CAACgC,QAAN,CACAC,MADA,CACOC,CAAC,IAAIA,CAAC,CAACC,OADd,EAEAV,GAFA,CAEIW,OAAO,IAAIA,OAAO,CAACT,IAFvB,EAGAU,IAHA,CAGK,IAHL,CADL,CAhBJ,EAuBKrC,KAAK,CAACsC,MAAN,iBAAgB,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAatC,KAAK,CAACsC,MAAnB,CAvBrB,CADH,CANL,eAkCQ,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,eAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFA,eAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAM/F,WAAW,CAACsD,QAAD,CAAjB,CAHA,CADJ,eAMI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,eAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFA,eAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAMtD,WAAW,CAAC0D,GAAD,CAAjB,CAHA,CANJ,eAWI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,eAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAFA,eAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAM1D,WAAW,CAAC2D,aAAD,CAAjB,CAHA,CAXJ,CAlCR,eAmDQ,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,eAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAFA,eAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAM3D,WAAW,CAACwD,KAAD,CAAjB,CAHA,CADJ,CAnDR,CAHG,eA+DH,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,WAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADJ,CADJ,eAKI,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,WAAT;AACA,IAAA,OAAO,EAAEa,WADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADJ,EAKKK,YAAY,EALjB,CALJ,CA/DG,CAAP;AA8EH","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport {Redirect, Link} from 'react-router-dom';\nimport styled from 'styled-components';\nimport {DialogContent, DialogFooter, ConfirmButton} from \"../FoodDialog/FoodDialog\";\nimport {formatPrice} from \"../Data/FoodData\";\nimport {getPrice} from \"../FoodDialog/FoodDialog\";\nimport {removeItem, getCart, addItem, emptyCart, addSubtotal} from \"../Cart/carthelper\";\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport {signin, authenticate, isAuthenticated, guest} from '../auth';\n\nconst StyledTableCell = withStyles((theme) => ({\n    head: {\n      backgroundColor: theme.palette.common.black,\n      color: theme.palette.common.white,\n    },\n    body: {\n      fontSize: 14,\n    },\n  }))(TableCell);\n  \n  const StyledTableRow = withStyles((theme) => ({\n    root: {\n      '&:nth-of-type(odd)': {\n        backgroundColor: theme.palette.action.hover,\n      },\n    },\n  }))(TableRow);\n\n  const useStyles = makeStyles({\n    table: {\n      minWidth: 700,\n    },\n  });\n  \nconst OrderStyled = styled.div`\nposition: fixed;\nright: 0px;\ntop: 57px;\nwidth: 340px;\nbackground-color: white;\nheight: calc(100% - 48px);\nz-index: 10;\nbox-shadow: 4px 0px 5px 4px grey;\ndisplay: flex;\nflex-direction: column;\n`;\n\nconst OrderContent = styled(DialogContent)`\npadding: 20px;\nheight: 100%\n`;\n\nconst OrderContainer = styled.div`\n    padding: 10px 0px;\n    border-bottom: 1px solid grey;\n    ${({editable}) =>\neditable ? `\n&:hover {\n    cursor: pointer;\n    background-color: #e7e7e7;\n}\n`\n    : `\n    pointer-events: none;\n    `}\n`;\n\nconst OrderItem = styled.div`\n    padding: 10px 0px;\n    display: grid;\n    grid-template-columns: 20px 150px 20px 60px;\n    justify-content: space-between;\n`;\n\nconst DetailItem = styled.div`\n    color: gray;\n    font-size: 10px;\n`\n\nfunction refreshPage() {\n    window.location.reload(false);\n  }\n\nexport function Order({orders, setOrders, setOpenFood}) {\n    const [items, setItems] = useState([]);\n    const subtotal = items.reduce((total, order) => {\n        return total + getPrice(order);\n    }, 0);\n    const tax = subtotal * 0.07;\n    const processingFee = (tax + subtotal) * 0.05;\n    const total = subtotal + tax + processingFee;\n    const [run, setRun] = useState(false);\n    const [user, setUser] = useState({\n        email: \"guest@guest.com\",\n        password: \"Franslk1\",\n        error: \"\",\n        loading: false,\n        redirectToReferrer: false,\n    });\n\n    const {email, password, loading, error, redirectToReferrer} = user;\n\n    const clickSubmit = event => {\n        event.preventDefault();\n        setUser({...user, error: false, loading: true});\n        signin({email, password})\n        .then(data => {\n            if(data.error) {\n                setUser({...user, error: data.error, loading: false});\n            } else {\n                authenticate(data, () => {\n                    setUser({\n                        ...user,\n                        redirectToReferrer: true\n                    });\n                    refreshPage()\n                });\n            }\n        });\n    };\n\n    const redirectUser = () => {\n        if(redirectToReferrer){\n            return <Redirect to=\"/checkout\"/>;\n        }\n    };\n\n    useEffect(()=> {\n        setItems(getCart());\n        console.log(items);\n    }, [run]);\n\n    const deleteItem= (index) => {\n        const newOrders = [...orders];\n        newOrders.splice(index, 1);\n        setOrders(newOrders);\n        \n    }\n\n    return <OrderStyled>\n    {items.length === 0 ?<OrderContent>Your cart is empty...\n        </OrderContent> : \n        <OrderContent>\n            {\" \"}\n            <OrderContainer>\n            You have {items.length} item(s) in your cart.\n            </OrderContainer>\n            {\" \"}\n            {items.map((order, index) => (\n                <OrderContainer editable>\n                    <OrderItem\n                    onClick={() => {\n                        setOpenFood({...order, index});\n\n                    }}\n                    >\n                        <div>{order.quantity}</div>\n                        <div>{order.name}</div>\n                        <div \n                        style={{cursor: 'pointer'}} \n                        onClick={e =>{\n                            e.stopPropagation();\n                            deleteItem(index);removeItem(order._id);refreshPage()}}>🗑</div>\n            <div>{formatPrice(getPrice(order))}</div>\n                    </OrderItem>\n                    <DetailItem>\n                        {order.toppings\n                        .filter(t => t.checked)\n                        .map(topping => topping.name)\n                        .join(\", \")\n                        }\n                    </DetailItem>\n                    {order.choice && <DetailItem>{order.choice}\n                    </DetailItem>}\n                </OrderContainer>\n                 ))}\n                <OrderContainer>\n                    <OrderItem>\n                    <div/>\n                    <div>Sub-Total:</div>\n                    <div>{formatPrice(subtotal)}</div>\n                    </OrderItem>\n                    <OrderItem>\n                    <div/>\n                    <div>Tax:</div>\n                    <div>{formatPrice(tax)}</div>\n                    </OrderItem>\n                    <OrderItem>\n                    <div/>\n                    <div>Processing Fee:</div>\n                    <div>{formatPrice(processingFee)}</div>\n                    </OrderItem>\n                </OrderContainer>\n                <OrderContainer>\n                    <OrderItem>\n                    <div/>\n                    <div>Total</div>\n                    <div>{formatPrice(total)}</div>\n                    </OrderItem>\n                </OrderContainer>\n           \n        </OrderContent>}\n        <DialogFooter>\n            <ConfirmButton>\n                <Link to=\"/checkout\">\n                Checkout </Link>\n            </ConfirmButton>\n            <ConfirmButton>\n                <Link to=\"/checkout\"\n                onClick={clickSubmit}\n                >\n                Guest Checkout </Link>\n                {redirectUser()}\n            </ConfirmButton>\n            \n        </DialogFooter>\n    </OrderStyled>\n}"]},"metadata":{},"sourceType":"module"}