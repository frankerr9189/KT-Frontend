{"ast":null,"code":"var _jsxFileName = \"/Users/KerrFamily/Desktop/FoodApp/src/user/CheckoutStyled.js\";\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { formatPrice } from \"../Data/FoodData\";\nimport { API } from \"../config\";\nimport { isAuthenticated } from '../auth';\nimport { useOpenFood } from \"../Hooks/useOpenFood\";\nimport { useOrders } from \"../Hooks/useOrders\";\nimport { useTitle } from \"../Hooks/useTitle\";\nimport { DialogContent, DialogFooter, DialogBanner, DialogBannerName, ConfirmButton } from \"../FoodDialog/FoodDialog\";\nimport { FoodLabel } from \"../Menu/FoodGrid\";\nimport { getCart, emptyCart } from \"../Cart/carthelper\";\nimport { getBraintreeClientToken, processPayment, createOrder } from \"../admin/adminApi\";\nimport { Link } from \"react-router-dom\";\nimport DropIn from 'braintree-web-drop-in-react';\nimport { getPrice } from \"../FoodDialog/FoodDialog\";\nexport const FoodGrid = styled.div`\ndisplay: grid;\nwidth: 1000px;\ngrid-template-columns: 1fr 1fr 1fr;\ngap: 20px;\npadding-bottom: 40px;\n`;\nconst CartStyled = styled.div`\ntop: 300px;\nwidth: 600px;\nbackground-color: white;\nheight: 600px;\nz-index: 10;\nbox-shadow: 4px 0px 5px 4px grey;\ndisplay: flex;\nflex-direction: column;\n`;\nconst CartContent = styled(DialogContent)`\npadding: 20px;\nheight: 100%\n`;\nconst CartContainer = styled.div`\n    padding: 10px 0px;\n    border-bottom: 1px solid grey;\n    ${({\n  editable\n}) => editable ? `\n&:hover {\n    cursor: pointer;\n    background-color: #e7e7e7;\n}\n` : `\n    pointer-events: none;\n    `}\n`;\nconst CartItem = styled.div`\n    padding: 10px 0px;\n    display: grid;\n    grid-template-columns: 20px 150px 20px 60px;\n    justify-content: space-between;\n`;\nexport const CartBanner = styled.div`\nmin-height: 50px;\nmargin-bottom: 20px;\nbackground-image: url(\"img/shark.jpeg\");\nbackground-position: center;\nbackground-size: cover;\n`;\nexport const CartBannerName = styled(FoodLabel)`\n    font-size: 25px;\n    padding: 5px 20px;\n    \n`;\nconst DetailItem = styled.div`\n    color: gray;\n    font-size: 10px;\n`;\nconst PaymentStyled = styled.div`\n    height: 600px;\n    width: 600px;\n    z-index: 10;\nbox-shadow: 4px 0px 5px 4px grey;\ndisplay: flex;\nflex-direction: column;\n`;\nconst ShippingBox = styled.div`\n    height: 400px;\n    width: 500px;\n    z-index: 10;\nbox-shadow: 4px 0px 5px 4px grey;\ndisplay: flex;\nflex-direction: column;\n`;\nexport function CheckoutStyled() {\n  const openFood = useOpenFood();\n  const orders = useOrders();\n  useTitle({ ...openFood,\n    ...orders\n  });\n  const [items, setItems] = useState([]);\n  const [run, setRun] = useState(false);\n  const subtotal = items.reduce((total, items) => {\n    return total + getPrice(items);\n  }, 0);\n  const tax = subtotal * 0.07;\n  const displayTax = tax.toFixed(2);\n  const processingFee = (tax + subtotal) * 0.05;\n  const displayProcessingFee = processingFee.toFixed(2);\n  const total = subtotal + tax + processingFee;\n  const displayTotal = total.toFixed(2);\n  const [values, setValues] = useState({\n    success: false,\n    clientToken: null,\n    error: '',\n    instance: {},\n    user: \"\",\n    orderItems: \"\",\n    shipName: \"\",\n    shipEmail: \"\",\n    shipAddress: \"\",\n    shipCity: \"\",\n    shipState: \"\",\n    shipZip: \"\",\n    method: \"\",\n    payment: \"\",\n    subTotalPrice: \"\",\n    taxPrice: \"\",\n    processingFeePrice: \"\",\n    totalPrice: \"\"\n  });\n  const {\n    success,\n    orderItems,\n    shipName,\n    shipEmail,\n    shipAddress,\n    shipCity,\n    shipState,\n    shipZip,\n    method,\n    payment,\n    subTotal,\n    processingFeePrice,\n    totalPrice\n  } = values;\n  useEffect(() => {\n    setItems(getCart());\n  }, [run]);\n\n  const showItems = items => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      onBlur: () => setValues({ ...values,\n        error: \"\"\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }), items.map((product, i) => /*#__PURE__*/React.createElement(DetailItem, {\n      key: i,\n      items: product,\n      setRun: setRun,\n      run: run,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    }, product.name, \" \", \" Qty: \", \" \", product.quantity, \" \", \" \", \" \", product.topping, \" $\", product.price)));\n  };\n\n  const userId = isAuthenticated() && isAuthenticated().user._id;\n\n  const token = isAuthenticated() && isAuthenticated().token;\n\n  const getToken = (userId, token) => {\n    getBraintreeClientToken(userId, token).then(values => {\n      if (values.error) {\n        setValues({ ...values,\n          error: values.error\n        });\n      } else {\n        setValues({\n          clientToken: values.clientToken\n        });\n      }\n    });\n  };\n\n  useEffect(() => {\n    getToken(userId, token);\n  }, []);\n\n  const buy = () => {\n    // send nonce to your server\n    //nonce= values.instance.requestPaymentMethod()\n    let nonce;\n    let getNonce = values.instance.requestPaymentMethod().then(values => {\n      // console.log(values)\n      nonce = values.nonce; //once you have nonce (card type, card number) send nonce as \"paymentMethodNonce\"\n      //and also total to be charged\n      //console.log('send nonce and total to process: ', nonce, total)\n\n      const paymentData = {\n        paymentMethodNonce: nonce,\n        amount: displayTotal\n      };\n      processPayment(userId, token, paymentData).then(response => {\n        console.log(values); //empty cart & create order\n\n        createOrderData = createOrder(userId, token, createOrderData);\n        setValues({ ...values,\n          success: response.success\n        });\n        emptyCart(() => {\n          console.log(\"payment success and empty cart\");\n        }); //setItems('');\n      }).catch(error => console.log(error));\n    }).catch(error => {\n      console.log('drop in error: ', error);\n      setValues({ ...values,\n        error: error.message\n      }); //empty cart\n      //create order\n    });\n  };\n\n  const showError = error => /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: values.error ? '' : 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 9\n    }\n  }, error);\n\n  const showSuccess = success => /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: success ? '' : 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 9\n    }\n  }, \"Thanks! Your payment was successful!\");\n\n  const showDropIn = () => /*#__PURE__*/React.createElement(\"div\", {\n    onBlur: () => setValues({ ...values,\n      error: ''\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 9\n    }\n  }, values.clientToken !== null && items.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(DropIn, {\n    options: {\n      authorization: values.clientToken,\n      paypal: {\n        flow: 'vault'\n      }\n    },\n    onInstance: instance => values.instance = instance,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: buy,\n    className: \"btn-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 21\n    }\n  }, \"Pay\")) : null);\n\n  const handleChange = name => event => {\n    const value = name === 'name' ? event.target.files[0] : event.target.value;\n    setValues({ ...values,\n      [name]: value\n    });\n  };\n\n  const clickSubmit = event => {\n    event.preventDefault();\n    setValues({ ...values\n    });\n    console.log(values);\n  };\n\n  const handleMethod = event => {\n    setValues({ ...values,\n      method: event.target.value\n    });\n    console.log(values);\n  };\n\n  let methodSelection = values.method;\n\n  const shippingMethod = () => /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 25\n    }\n  }, \"Method Type:\"), /*#__PURE__*/React.createElement(\"select\", {\n    className: \"form-control\",\n    onChange: handleMethod,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 17\n    }\n  }, \"Select Method\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 17\n    }\n  }, \"Pick Up\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 17\n    }\n  }, \"Delivery\")));\n\n  const shippingForm = () => /*#__PURE__*/React.createElement(\"form\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 17\n    }\n  }, \"Name: \"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('shipName'),\n    type: \"text\",\n    className: \"form-control\",\n    value: shipName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 17\n    }\n  }, \"Email: \"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('shipEmail'),\n    type: \"text\",\n    className: \"form-control\",\n    value: shipEmail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 17\n    }\n  }, \"Address: \"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('shipAddress'),\n    type: \"text\",\n    className: \"form-control\",\n    value: shipAddress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 17\n    }\n  }, \"City: \"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('shipCity'),\n    type: \"text\",\n    className: \"form-control\",\n    value: shipCity,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 17\n    }\n  }, \"State: \"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('shipState'),\n    type: \"text\",\n    className: \"form-control\",\n    value: shipState,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 17\n    }\n  }, \"Zip: \"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange('shipZip'),\n    type: \"text\",\n    className: \"form-control\",\n    value: shipZip,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 17\n    }\n  })));\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FoodGrid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CartStyled, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CartContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CartBanner, {\n    img: `${API}/product/photo/shark.jpeg`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CartBannerName, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 9\n    }\n  }, \"Summary, your cart has \", `${items.length}`, \" items.\")), /*#__PURE__*/React.createElement(CartContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 9\n    }\n  }, showItems(items), /*#__PURE__*/React.createElement(DetailItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 13\n    }\n  }, \"Sub-Total: \", formatPrice(subtotal), \" \"), /*#__PURE__*/React.createElement(DetailItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 13\n    }\n  }, \"Tax: \", formatPrice(tax), \" \"), /*#__PURE__*/React.createElement(DetailItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 13\n    }\n  }, \"Processing Fee: \", formatPrice(processingFee), \" \"), /*#__PURE__*/React.createElement(DetailItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 13\n    }\n  }, \"Total: \", formatPrice(total), \" \")))), /*#__PURE__*/React.createElement(PaymentStyled, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CartBanner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CartBannerName, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 5\n    }\n  }, \"Delivery Address\")), shippingMethod(), shippingForm(), /*#__PURE__*/React.createElement(CartBanner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CartBannerName, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 13\n    }\n  }, \"Payment Method\")), showSuccess(values.success), showError(values.error), showDropIn())));\n}","map":{"version":3,"sources":["/Users/KerrFamily/Desktop/FoodApp/src/user/CheckoutStyled.js"],"names":["React","useState","useEffect","styled","formatPrice","API","isAuthenticated","useOpenFood","useOrders","useTitle","DialogContent","DialogFooter","DialogBanner","DialogBannerName","ConfirmButton","FoodLabel","getCart","emptyCart","getBraintreeClientToken","processPayment","createOrder","Link","DropIn","getPrice","FoodGrid","div","CartStyled","CartContent","CartContainer","editable","CartItem","CartBanner","CartBannerName","DetailItem","PaymentStyled","ShippingBox","CheckoutStyled","openFood","orders","items","setItems","run","setRun","subtotal","reduce","total","tax","displayTax","toFixed","processingFee","displayProcessingFee","displayTotal","values","setValues","success","clientToken","error","instance","user","orderItems","shipName","shipEmail","shipAddress","shipCity","shipState","shipZip","method","payment","subTotalPrice","taxPrice","processingFeePrice","totalPrice","subTotal","showItems","map","product","i","name","quantity","topping","price","userId","_id","token","getToken","then","buy","nonce","getNonce","requestPaymentMethod","paymentData","paymentMethodNonce","amount","response","console","log","createOrderData","catch","message","showError","display","showSuccess","showDropIn","length","authorization","paypal","flow","handleChange","event","value","target","files","clickSubmit","preventDefault","handleMethod","methodSelection","shippingMethod","shippingForm"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAAQC,WAAR,QAA0B,kBAA1B;AACA,SAAQC,GAAR,QAAkB,WAAlB;AACA,SAAQC,eAAR,QAA8B,SAA9B;AACA,SAAQC,WAAR,QAA0B,sBAA1B;AACA,SAAQC,SAAR,QAAwB,oBAAxB;AACA,SAAQC,QAAR,QAAuB,mBAAvB;AACA,SAAQC,aAAR,EAAuBC,YAAvB,EAAqCC,YAArC,EAAmDC,gBAAnD,EAAqEC,aAArE,QAAyF,0BAAzF;AACA,SAAQC,SAAR,QAAwB,kBAAxB;AACA,SAAQC,OAAR,EAAiBC,SAAjB,QAAiC,oBAAjC;AACA,SAAQC,uBAAR,EAAiCC,cAAjC,EAAiDC,WAAjD,QAAmE,mBAAnE;AACA,SAAQC,IAAR,QAAmB,kBAAnB;AACA,OAAOC,MAAP,MAAmB,6BAAnB;AACA,SAAQC,QAAR,QAAuB,0BAAvB;AAEA,OAAO,MAAMC,QAAQ,GAAGrB,MAAM,CAACsB,GAAI;;;;;;CAA5B;AASP,MAAMC,UAAU,GAAGvB,MAAM,CAACsB,GAAI;;;;;;;;;CAA9B;AAWA,MAAME,WAAW,GAAGxB,MAAM,CAACO,aAAD,CAAgB;;;CAA1C;AAKA,MAAMkB,aAAa,GAAGzB,MAAM,CAACsB,GAAI;;;MAG3B,CAAC;AAACI,EAAAA;AAAD,CAAD,KACNA,QAAQ,GAAI;;;;;CAAJ,GAMD;;KAED;CAZN;AAeA,MAAMC,QAAQ,GAAG3B,MAAM,CAACsB,GAAI;;;;;CAA5B;AAMA,OAAO,MAAMM,UAAU,GAAG5B,MAAM,CAACsB,GAAI;;;;;;CAA9B;AAOP,OAAO,MAAMO,cAAc,GAAG7B,MAAM,CAACY,SAAD,CAAY;;;;CAAzC;AAMP,MAAMkB,UAAU,GAAG9B,MAAM,CAACsB,GAAI;;;CAA9B;AAKA,MAAMS,aAAa,GAAG/B,MAAM,CAACsB,GAAI;;;;;;;CAAjC;AAQA,MAAMU,WAAW,GAAGhC,MAAM,CAACsB,GAAI;;;;;;;CAA/B;AAUA,OAAO,SAASW,cAAT,GAAyB;AAC5B,QAAMC,QAAQ,GAAG9B,WAAW,EAA5B;AACA,QAAM+B,MAAM,GAAG9B,SAAS,EAAxB;AACAC,EAAAA,QAAQ,CAAC,EAAC,GAAG4B,QAAJ;AAAc,OAAGC;AAAjB,GAAD,CAAR;AACA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBvC,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACwC,GAAD,EAAMC,MAAN,IAAgBzC,QAAQ,CAAC,KAAD,CAA9B;AACA,QAAM0C,QAAQ,GAAGJ,KAAK,CAACK,MAAN,CAAa,CAACC,KAAD,EAAQN,KAAR,KAAkB;AAC5C,WAAOM,KAAK,GAAGtB,QAAQ,CAACgB,KAAD,CAAvB;AACH,GAFgB,EAEd,CAFc,CAAjB;AAGA,QAAMO,GAAG,GAAGH,QAAQ,GAAG,IAAvB;AACA,QAAMI,UAAU,GAAGD,GAAG,CAACE,OAAJ,CAAY,CAAZ,CAAnB;AACA,QAAMC,aAAa,GAAG,CAACH,GAAG,GAAGH,QAAP,IAAmB,IAAzC;AACA,QAAMO,oBAAoB,GAAGD,aAAa,CAACD,OAAd,CAAsB,CAAtB,CAA7B;AACA,QAAMH,KAAK,GAAGF,QAAQ,GAAGG,GAAX,GAAiBG,aAA/B;AACA,QAAME,YAAY,GAAGN,KAAK,CAACG,OAAN,CAAc,CAAd,CAArB;AACA,QAAM,CAACI,MAAD,EAASC,SAAT,IAAsBpD,QAAQ,CAChC;AACJqD,IAAAA,OAAO,EAAE,KADL;AAEJC,IAAAA,WAAW,EAAE,IAFT;AAGJC,IAAAA,KAAK,EAAE,EAHH;AAIJC,IAAAA,QAAQ,EAAE,EAJN;AAKJC,IAAAA,IAAI,EAAE,EALF;AAMJC,IAAAA,UAAU,EAAE,EANR;AAOJC,IAAAA,QAAQ,EAAE,EAPN;AAQJC,IAAAA,SAAS,EAAE,EARP;AASJC,IAAAA,WAAW,EAAE,EATT;AAUJC,IAAAA,QAAQ,EAAE,EAVN;AAWJC,IAAAA,SAAS,EAAE,EAXP;AAYJC,IAAAA,OAAO,EAAE,EAZL;AAaJC,IAAAA,MAAM,EAAE,EAbJ;AAcJC,IAAAA,OAAO,EAAE,EAdL;AAeJC,IAAAA,aAAa,EAAE,EAfX;AAgBJC,IAAAA,QAAQ,EAAE,EAhBN;AAiBJC,IAAAA,kBAAkB,EAAC,EAjBf;AAkBJC,IAAAA,UAAU,EAAE;AAlBR,GADgC,CAApC;AAuBA,QAAM;AAACjB,IAAAA,OAAD;AAAUK,IAAAA,UAAV;AAAsBC,IAAAA,QAAtB;AAAgCC,IAAAA,SAAhC;AAA2CC,IAAAA,WAA3C;AAAwDC,IAAAA,QAAxD;AAAkEC,IAAAA,SAAlE;AAA6EC,IAAAA,OAA7E;AAAsFC,IAAAA,MAAtF;AAA8FC,IAAAA,OAA9F;AAAuGK,IAAAA,QAAvG;AAAiHF,IAAAA,kBAAjH;AAAqIC,IAAAA;AAArI,MAAmJnB,MAAzJ;AAEAlD,EAAAA,SAAS,CAAC,MAAK;AACXsC,IAAAA,QAAQ,CAACxB,OAAO,EAAR,CAAR;AACH,GAFQ,EAEN,CAACyB,GAAD,CAFM,CAAT;;AAIA,QAAMgC,SAAS,GAAGlC,KAAK,IAAI;AACvB,wBACI;AAAK,MAAA,MAAM,EAAE,MAAKc,SAAS,CAAC,EAAC,GAAGD,MAAJ;AAAYI,QAAAA,KAAK,EAAC;AAAlB,OAAD,CAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEKjB,KAAK,CAACmC,GAAN,CAAU,CAACC,OAAD,EAAUC,CAAV,kBACX,oBAAC,UAAD;AACA,MAAA,GAAG,EAAGA,CADN;AAEA,MAAA,KAAK,EAAED,OAFP;AAGA,MAAA,MAAM,EAAEjC,MAHR;AAIA,MAAA,GAAG,EAAED,GAJL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKEkC,OAAO,CAACE,IALV,OAKiB,QALjB,OAK4BF,OAAO,CAACG,QALpC,OAK+C,GAL/C,OAKqDH,OAAO,CAACI,OAL7D,EAKsE,IALtE,EAK4EJ,OAAO,CAACK,KALpF,CADC,CAFL,CADJ;AAcH,GAfD;;AAiBA,QAAMC,MAAM,GAAG3E,eAAe,MAAMA,eAAe,GAAGoD,IAAlB,CAAuBwB,GAA3D;;AACA,QAAMC,KAAK,GAAG7E,eAAe,MAAMA,eAAe,GAAG6E,KAArD;;AAEA,QAAMC,QAAQ,GAAG,CAACH,MAAD,EAASE,KAAT,KAAmB;AAChCjE,IAAAA,uBAAuB,CAAC+D,MAAD,EAASE,KAAT,CAAvB,CAAuCE,IAAvC,CAA4CjC,MAAM,IAAI;AAClD,UAAGA,MAAM,CAACI,KAAV,EAAiB;AACbH,QAAAA,SAAS,CAAC,EAAC,GAAGD,MAAJ;AAAYI,UAAAA,KAAK,EAAEJ,MAAM,CAACI;AAA1B,SAAD,CAAT;AACH,OAFD,MAEK;AACDH,QAAAA,SAAS,CAAC;AAACE,UAAAA,WAAW,EAAEH,MAAM,CAACG;AAArB,SAAD,CAAT;AACH;AACJ,KAND;AAOH,GARD;;AAUArD,EAAAA,SAAS,CAAC,MAAI;AACVkF,IAAAA,QAAQ,CAACH,MAAD,EAASE,KAAT,CAAR;AACH,GAFQ,EAEN,EAFM,CAAT;;AAIA,QAAMG,GAAG,GAAE,MAAM;AACb;AACA;AACA,QAAIC,KAAJ;AACA,QAAIC,QAAQ,GAAGpC,MAAM,CAACK,QAAP,CAAgBgC,oBAAhB,GACdJ,IADc,CACRjC,MAAM,IAAI;AACd;AACCmC,MAAAA,KAAK,GAAGnC,MAAM,CAACmC,KAAf,CAFa,CAGb;AACA;AACA;;AACJ,YAAMG,WAAW,GAAE;AACfC,QAAAA,kBAAkB,EAAEJ,KADL;AAEfK,QAAAA,MAAM,EAAEzC;AAFO,OAAnB;AAKAhC,MAAAA,cAAc,CAAC8D,MAAD,EAASE,KAAT,EAAgBO,WAAhB,CAAd,CACCL,IADD,CACMQ,QAAQ,IAAG;AACbC,QAAAA,OAAO,CAACC,GAAR,CAAa3C,MAAb,EADa,CAET;;AAEA4C,QAAAA,eAAe,GACf5E,WAAW,CAAC6D,MAAD,EAASE,KAAT,EAAgBa,eAAhB,CADX;AAGA3C,QAAAA,SAAS,CAAC,EAAC,GAAGD,MAAJ;AAAYE,UAAAA,OAAO,EAAEuC,QAAQ,CAACvC;AAA9B,SAAD,CAAT;AACArC,QAAAA,SAAS,CAAC,MAAI;AACV6E,UAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ;AAEH,SAHQ,CAAT,CARS,CAYT;AACH,OAdL,EAeCE,KAfD,CAeOzC,KAAK,IAAIsC,OAAO,CAACC,GAAR,CAAYvC,KAAZ,CAfhB;AAgBC,KA5Bc,EA6BdyC,KA7Bc,CA6BRzC,KAAK,IAAI;AACZsC,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BvC,KAA/B;AACAH,MAAAA,SAAS,CAAC,EAAC,GAAGD,MAAJ;AAAYI,QAAAA,KAAK,EAAEA,KAAK,CAAC0C;AAAzB,OAAD,CAAT,CAFY,CAGZ;AACA;AACH,KAlCc,CAAf;AAmCH,GAvCD;;AAyCA,QAAMC,SAAS,GAAG3C,KAAK,iBACnB;AAAK,IAAA,KAAK,EAAE;AAAE4C,MAAAA,OAAO,EAAEhD,MAAM,CAACI,KAAP,GAAe,EAAf,GAAoB;AAA/B,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKA,KADL,CADJ;;AAMA,QAAM6C,WAAW,GAAG/C,OAAO,iBACvB;AAAK,IAAA,KAAK,EAAE;AAAE8C,MAAAA,OAAO,EAAE9C,OAAO,GAAG,EAAH,GAAQ;AAA1B,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CADJ;;AAMA,QAAMgD,UAAU,GAAE,mBACd;AAAK,IAAA,MAAM,EAAE,MAAMjD,SAAS,CAAC,EAAE,GAAGD,MAAL;AAAaI,MAAAA,KAAK,EAAE;AAApB,KAAD,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEKJ,MAAM,CAACG,WAAP,KAAuB,IAAvB,IAA+BhB,KAAK,CAACgE,MAAN,GAAa,CAA5C,gBACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,MAAD;AACI,IAAA,OAAO,EAAE;AACLC,MAAAA,aAAa,EAAEpD,MAAM,CAACG,WADjB;AAELkD,MAAAA,MAAM,EAAE;AACJC,QAAAA,IAAI,EAAE;AADF;AAFH,KADb;AAOI,IAAA,UAAU,EAAEjD,QAAQ,IAAKL,MAAM,CAACK,QAAP,GAAkBA,QAP/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAUI;AAAQ,IAAA,OAAO,EAAE6B,GAAjB;AAAsB,IAAA,SAAS,EAAC,WAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAVJ,CADH,GAeG,IAjBR,CADJ;;AAsBA,QAAMqB,YAAY,GAAG9B,IAAI,IAAI+B,KAAK,IAAI;AAClC,UAAMC,KAAK,GAAGhC,IAAI,KAAK,MAAT,GAAkB+B,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAlB,GAAyCH,KAAK,CAACE,MAAN,CAAaD,KAApE;AACAxD,IAAAA,SAAS,CAAC,EAAC,GAAGD,MAAJ;AAAY,OAACyB,IAAD,GAAQgC;AAApB,KAAD,CAAT;AACH,GAHD;;AAKA,QAAMG,WAAW,GAAGJ,KAAK,IAAI;AACzBA,IAAAA,KAAK,CAACK,cAAN;AACA5D,IAAAA,SAAS,CAAC,EAAC,GAAGD;AAAJ,KAAD,CAAT;AACA0C,IAAAA,OAAO,CAACC,GAAR,CAAa3C,MAAb;AACF,GAJF;;AAMC,QAAM8D,YAAY,GAAGN,KAAK,IAAI;AAC3BvD,IAAAA,SAAS,CAAC,EAAC,GAAGD,MAAJ;AAAYc,MAAAA,MAAM,EAAE0C,KAAK,CAACE,MAAN,CAAaD;AAAjC,KAAD,CAAT;AACAf,IAAAA,OAAO,CAACC,GAAR,CAAY3C,MAAZ;AACH,GAHA;;AAKD,MAAI+D,eAAe,GAAG/D,MAAM,CAACc,MAA7B;;AAEA,QAAMkD,cAAc,GAAG,mBACnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADhB,eAEgB;AACZ,IAAA,SAAS,EAAC,cADE;AACa,IAAA,QAAQ,EAAEF,YADvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAGR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAHQ,eAIR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAJQ,eAKR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALQ,CAFhB,CADJ;;AAaA,QAAMG,YAAY,GAAG,mBACjB;AAAM,IAAA,SAAS,EAAC,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,SAAS,EAAC,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAO,IAAA,QAAQ,EAAEV,YAAY,CAAC,UAAD,CAA7B;AAA2C,IAAA,IAAI,EAAC,MAAhD;AAAuD,IAAA,SAAS,EAAC,cAAjE;AAAgF,IAAA,KAAK,EAAE/C,QAAvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CADJ,eAKI;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,SAAS,EAAC,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,eAEI;AAAO,IAAA,QAAQ,EAAE+C,YAAY,CAAC,WAAD,CAA7B;AAA4C,IAAA,IAAI,EAAC,MAAjD;AAAwD,IAAA,SAAS,EAAC,cAAlE;AAAiF,IAAA,KAAK,EAAE9C,SAAxF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CALJ,eASI;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,SAAS,EAAC,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADJ,eAEI;AAAO,IAAA,QAAQ,EAAE8C,YAAY,CAAC,aAAD,CAA7B;AAA8C,IAAA,IAAI,EAAC,MAAnD;AAA0D,IAAA,SAAS,EAAC,cAApE;AAAmF,IAAA,KAAK,EAAE7C,WAA1F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CATJ,eAaI;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,SAAS,EAAC,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAO,IAAA,QAAQ,EAAE6C,YAAY,CAAC,UAAD,CAA7B;AAA2C,IAAA,IAAI,EAAC,MAAhD;AAAuD,IAAA,SAAS,EAAC,cAAjE;AAAgF,IAAA,KAAK,EAAE5C,QAAvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CAbJ,eAiBI;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,SAAS,EAAC,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,eAEI;AAAO,IAAA,QAAQ,EAAE4C,YAAY,CAAC,WAAD,CAA7B;AAA4C,IAAA,IAAI,EAAC,MAAjD;AAAwD,IAAA,SAAS,EAAC,cAAlE;AAAiF,IAAA,KAAK,EAAE3C,SAAxF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CAjBJ,eAqBI;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,SAAS,EAAC,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,eAEI;AAAO,IAAA,QAAQ,EAAE2C,YAAY,CAAC,SAAD,CAA7B;AAA0C,IAAA,IAAI,EAAC,MAA/C;AAAsD,IAAA,SAAS,EAAC,cAAhE;AAA+E,IAAA,KAAK,EAAE1C,OAAtF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CArBJ,CADJ;;AA8BA,sBACI,uDACA,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACJ,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,UAAD;AAAY,IAAA,GAAG,EAAG,GAAE5D,GAAI,2BAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAAyC,GAAEkC,KAAK,CAACgE,MAAO,EAAxD,YADJ,CADA,eAII,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACK9B,SAAS,CAAClC,KAAD,CADd,eAEI,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAwBnC,WAAW,CAACuC,QAAD,CAAnC,MAFJ,eAGI,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAkBvC,WAAW,CAAC0C,GAAD,CAA7B,MAHJ,eAII,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAA6B1C,WAAW,CAAC6C,aAAD,CAAxC,MAJJ,eAKI,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAoB7C,WAAW,CAACyC,KAAD,CAA/B,MALJ,CAJJ,CADI,CADA,eAgBJ,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADA,CADA,EAIKuE,cAAc,EAJnB,EAKKC,YAAY,EALjB,eAMA,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACQ,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADR,CANA,EAQShB,WAAW,CAACjD,MAAM,CAACE,OAAR,CARpB,EASS6C,SAAS,CAAC/C,MAAM,CAACI,KAAR,CATlB,EAUS8C,UAAU,EAVnB,CAhBI,CADA,CADJ;AAiCH","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport styled from 'styled-components';\nimport {formatPrice} from \"../Data/FoodData\";\nimport {API} from \"../config\";\nimport {isAuthenticated} from '../auth';\nimport {useOpenFood} from \"../Hooks/useOpenFood\";\nimport {useOrders} from \"../Hooks/useOrders\";\nimport {useTitle} from \"../Hooks/useTitle\";\nimport {DialogContent, DialogFooter, DialogBanner, DialogBannerName, ConfirmButton} from \"../FoodDialog/FoodDialog\";\nimport {FoodLabel} from \"../Menu/FoodGrid\";\nimport {getCart, emptyCart} from \"../Cart/carthelper\";\nimport {getBraintreeClientToken, processPayment, createOrder} from \"../admin/adminApi\";\nimport {Link} from \"react-router-dom\";\nimport DropIn from 'braintree-web-drop-in-react';\nimport {getPrice} from \"../FoodDialog/FoodDialog\";\n\nexport const FoodGrid = styled.div`\ndisplay: grid;\nwidth: 1000px;\ngrid-template-columns: 1fr 1fr 1fr;\ngap: 20px;\npadding-bottom: 40px;\n`;\n\n\nconst CartStyled = styled.div`\ntop: 300px;\nwidth: 600px;\nbackground-color: white;\nheight: 600px;\nz-index: 10;\nbox-shadow: 4px 0px 5px 4px grey;\ndisplay: flex;\nflex-direction: column;\n`;\n\nconst CartContent = styled(DialogContent)`\npadding: 20px;\nheight: 100%\n`;\n\nconst CartContainer = styled.div`\n    padding: 10px 0px;\n    border-bottom: 1px solid grey;\n    ${({editable}) =>\neditable ? `\n&:hover {\n    cursor: pointer;\n    background-color: #e7e7e7;\n}\n`\n    : `\n    pointer-events: none;\n    `}\n`;\n\nconst CartItem = styled.div`\n    padding: 10px 0px;\n    display: grid;\n    grid-template-columns: 20px 150px 20px 60px;\n    justify-content: space-between;\n`;\nexport const CartBanner = styled.div`\nmin-height: 50px;\nmargin-bottom: 20px;\nbackground-image: url(\"img/shark.jpeg\");\nbackground-position: center;\nbackground-size: cover;\n`;\nexport const CartBannerName = styled(FoodLabel)`\n    font-size: 25px;\n    padding: 5px 20px;\n    \n`;\n\nconst DetailItem = styled.div`\n    color: gray;\n    font-size: 10px;\n`\n\nconst PaymentStyled = styled.div`\n    height: 600px;\n    width: 600px;\n    z-index: 10;\nbox-shadow: 4px 0px 5px 4px grey;\ndisplay: flex;\nflex-direction: column;\n`\nconst ShippingBox = styled.div`\n    height: 400px;\n    width: 500px;\n    z-index: 10;\nbox-shadow: 4px 0px 5px 4px grey;\ndisplay: flex;\nflex-direction: column;\n`\n\n\nexport function CheckoutStyled(){ \n    const openFood = useOpenFood();\n    const orders = useOrders();\n    useTitle({...openFood, ...orders});\n    const [items, setItems] = useState([]);\n    const [run, setRun] = useState(false);\n    const subtotal = items.reduce((total, items) => {\n        return total + getPrice(items);\n    }, 0);\n    const tax = subtotal * 0.07;\n    const displayTax = tax.toFixed(2);\n    const processingFee = (tax + subtotal) * 0.05;\n    const displayProcessingFee = processingFee.toFixed(2);\n    const total = subtotal + tax + processingFee;\n    const displayTotal = total.toFixed(2);\n    const [values, setValues] = useState(\n        {\n    success: false,\n    clientToken: null,\n    error: '',\n    instance: {},\n    user: \"\",\n    orderItems: \"\",\n    shipName: \"\",\n    shipEmail: \"\",\n    shipAddress: \"\",\n    shipCity: \"\",\n    shipState: \"\",\n    shipZip: \"\",\n    method: \"\",\n    payment: \"\",\n    subTotalPrice: \"\",\n    taxPrice: \"\",\n    processingFeePrice:\"\",\n    totalPrice: \"\",\n        }\n    );\n\n    const {success, orderItems, shipName, shipEmail, shipAddress, shipCity, shipState, shipZip, method, payment, subTotal, processingFeePrice, totalPrice} = values;\n\n    useEffect(()=> {\n        setItems(getCart());\n    }, [run]);\n    \n    const showItems = items => {\n        return(\n            <div onBlur={()=> setValues({...values, error:\"\"})}>\n                <hr/>\n                {items.map((product, i)=> (\n                <DetailItem \n                key ={i} \n                items={product}\n                setRun={setRun}\n                run={run}\n                >{product.name} {\" Qty: \"} {product.quantity} {\" \"} {product.topping}{\" $\"}{product.price}</DetailItem>\n                ))\n                }\n            </div>\n        );\n    };\n\n    const userId = isAuthenticated() && isAuthenticated().user._id;\n    const token = isAuthenticated() && isAuthenticated().token;\n\n    const getToken = (userId, token) => {\n        getBraintreeClientToken(userId, token).then(values => {\n            if(values.error) {\n                setValues({...values, error: values.error})\n            }else{\n                setValues({clientToken: values.clientToken})\n            }\n        })\n    };\n\n    useEffect(()=>{\n        getToken(userId, token)\n    }, []);\n\n    const buy= () => {\n        // send nonce to your server\n        //nonce= values.instance.requestPaymentMethod()\n        let nonce;\n        let getNonce = values.instance.requestPaymentMethod()\n        .then( values => {\n           // console.log(values)\n            nonce = values.nonce\n            //once you have nonce (card type, card number) send nonce as \"paymentMethodNonce\"\n            //and also total to be charged\n            //console.log('send nonce and total to process: ', nonce, total)\n        const paymentData ={\n            paymentMethodNonce: nonce,\n            amount: displayTotal\n        }\n\n        processPayment(userId, token, paymentData)\n        .then(response=> {\n            console.log((values));\n                //empty cart & create order\n\n                createOrderData = \n                createOrder(userId, token, createOrderData)\n\n                setValues({...values, success: response.success}); \n                emptyCart(()=>{\n                    console.log(\"payment success and empty cart\");\n                    \n                });\n                //setItems('');\n            })\n        .catch(error => console.log(error));\n        })\n        .catch(error => {\n            console.log('drop in error: ', error)\n            setValues({...values, error: error.message});\n            //empty cart\n            //create order\n        })\n    }\n\n    const showError = error => (\n        <div style={{ display: values.error ? '' : 'none' }}>\n            {error}\n        </div>\n    );\n\n    const showSuccess = success => (\n        <div style={{ display: success ? '' : 'none' }}>\n            Thanks! Your payment was successful!\n        </div>\n    );\n\n    const showDropIn= () => (\n        <div onBlur={() => setValues({ ...values, error: '' })}>\n            \n            {values.clientToken !== null && items.length>0 ? (\n                <div>\n                    <DropIn\n                        options={{\n                            authorization: values.clientToken,\n                            paypal: {\n                                flow: 'vault'\n                            }\n                        }}\n                        onInstance={instance => (values.instance = instance)}\n                    />\n                    <button onClick={buy} className=\"btn-block\">\n                        Pay\n                    </button>\n                </div>\n            ) : null}\n        </div>\n    );\n\n    const handleChange = name => event => {\n        const value = name === 'name' ? event.target.files[0]: event.target.value;\n        setValues({...values, [name]: value});\n    };\n\n    const clickSubmit = event => {\n        event.preventDefault();\n        setValues({...values});\n        console.log((values));\n     };\n\n     const handleMethod = event => {\n        setValues({...values, method: event.target.value });\n        console.log(values);\n    };\n\n    let methodSelection = values.method;\n\n    const shippingMethod = () => (\n        <div>\n                        <label>Method Type:</label>\n                        <select \n            className=\"form-control\" onChange={handleMethod}\n           >\n                <option>Select Method</option>\n                <option>Pick Up</option>\n                <option>Delivery</option>\n            </select>\n       </div>\n    )\n\n    const shippingForm = () => (\n        <form className=\"mb-3\">\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Name: </label>\n                <input onChange={handleChange('shipName')} type=\"text\" className=\"form-control\" value={shipName}/>\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Email: </label>\n                <input onChange={handleChange('shipEmail')} type=\"text\" className=\"form-control\" value={shipEmail}/>\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Address: </label>\n                <input onChange={handleChange('shipAddress')} type=\"text\" className=\"form-control\" value={shipAddress}/>\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">City: </label>\n                <input onChange={handleChange('shipCity')} type=\"text\" className=\"form-control\" value={shipCity}/>\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">State: </label>\n                <input onChange={handleChange('shipState')} type=\"text\" className=\"form-control\" value={shipState}/>\n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Zip: </label>\n                <input onChange={handleChange('shipZip')} type=\"text\" className=\"form-control\" value={shipZip}/>\n            </div>\n            {/* <button className=\"btn btn-outline-primary\">Shipping</button> */}\n        </form>\n    );\n\n    return (\n        <>\n        <FoodGrid> \n        <CartStyled>\n    <CartContainer>\n    <CartBanner img={`${API}/product/photo/shark.jpeg`}>\n        <CartBannerName>Summary, your cart has {`${items.length}`} items.</CartBannerName>\n    </CartBanner>\n        <CartContent>\n            {showItems(items)}\n            <DetailItem>Sub-Total: {formatPrice(subtotal)} </DetailItem>\n            <DetailItem>Tax: {formatPrice(tax)} </DetailItem>           \n            <DetailItem>Processing Fee: {formatPrice(processingFee)} </DetailItem>\n            <DetailItem>Total: {formatPrice(total)} </DetailItem>\n        </CartContent>\n    </CartContainer>\n    </CartStyled>\n\n    <PaymentStyled>\n    <CartBanner>\n    <CartBannerName>Delivery Address</CartBannerName>\n    </CartBanner>\n        {shippingMethod()}\n        {shippingForm()}\n    <CartBanner>\n            <CartBannerName>Payment Method</CartBannerName></CartBanner>\n            {showSuccess(values.success)}\n            {showError(values.error)}\n            {showDropIn()}\n    </PaymentStyled>\n    </FoodGrid>\n    </>\n    );\n}"]},"metadata":{},"sourceType":"module"}