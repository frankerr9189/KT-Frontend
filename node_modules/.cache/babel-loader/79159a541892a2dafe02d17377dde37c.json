{"ast":null,"code":"var _jsxFileName = \"/Users/KerrFamily/Desktop/FoodApp/src/FoodDialog/FoodDialog.js\";\nimport React from 'react';\nimport styled from 'styled-components';\nimport { FoodLabel } from \"../Menu/FoodGrid\";\nimport { seaBlue } from '../Styles/colors';\nimport { Title } from '../Styles/title';\nimport { formatPrice } from \"../Data/FoodData\";\nimport { QuantityInput } from \"./QuantityInput\";\nimport { useQuantity } from \"../Hooks/useQuantity\";\nimport { Toppings } from \"./Toppings\";\nimport { useToppings } from \"../Hooks/useToppings\";\nimport { useChoice } from \"../Hooks/useChoice\";\nimport { Choices } from \"./Choices\";\nimport { addItem } from \"../Cart/carthelper\";\nimport { API } from \"../config\";\nexport const Dialog = styled.div`\n    width: 500px;\n    background-color: white;\n    position: fixed;\n    top: 75px;\n    z-index: 5;\n    max-height: calc(100% - 100px);\n    left: calc(50% - 250px);\n    display: flex;\n    flex-direction: column;\n`;\nconst DialogShadow = styled.div`\n    position: fixed;\n    height: 100%;\n    width: 100%;\n    top: 0px;\n    background-color: black;\n    opacity: 0.7;\n    z-index: 4;\n`;\nconst DialogBanner = styled.div`\nmin-height: 200px;\nmargin-bottom: 20px;\n${({\n  img\n}) => img ? `background-image: url(${img});` : `min-height: 75px;`}\nbackground-position: center;\nbackground-size: cover;\n`;\nconst DialogBannerName = styled(FoodLabel)`\n    font-size: 30px;\n    padding: 5px 40px;\n    top: ${({\n  img\n}) => img ? `100px` : `20px`};\n`;\nconst pricePerTopping = 0.5;\nexport function getPrice(order) {\n  return order.quantity * (order.price + order.toppings.filter(t => t.checked).length * pricePerTopping);\n} //overflow auto adds the scroll bar to the dialog content area if needed\n\nexport const DialogContent = styled.div`\noverflow: auto; \nmin-height: 100px;\npadding: 0px 40px;\npadding-bottom: 80px;\n`;\nexport const DialogFooter = styled.div`\nbox-shadow: 0px -2px 10px 0px grey;\nheight: 60px;\ndisplay: flex;\njustify-content: center;\n`;\nexport const ConfirmButton = styled(Title)`\nmargin: 10px;\ncolor: white;\nheight: 20px;\nborder-radius: 5px;\npadding: 10px;\ntext-align: center;\nwidth: 200px;\ncursor: pointer;\nbackground-color: ${seaBlue};\n${({\n  disabled\n}) => disabled && `\nopacity: .5;\nbackground-color: grey;\npointer-events: none;\n`}\n`;\n\nfunction hasToppings(food) {\n  return food.category.name === 'Pizza';\n}\n\nfunction FoodDialogContainer({\n  openFood,\n  setOpenFood,\n  setOrders,\n  orders\n}) {\n  const quantity = useQuantity(openFood && openFood.quantity);\n  const toppings = useToppings(openFood.toppings);\n  const choiceRadio = useChoice(openFood.choice);\n  const isEditing = openFood.index > -1;\n\n  function close() {\n    setOpenFood();\n  }\n\n  const order = { ...openFood,\n    quantity: quantity.value,\n    toppings: toppings.toppings,\n    itemAllCost: itemCost,\n    choice: choiceRadio.value\n  };\n\n  function editOrder() {\n    const newOrders = [...orders];\n    newOrders[order.index] = order;\n    setOrders(newOrders);\n    close();\n  }\n\n  ;\n\n  function addToOrder() {\n    setOrders([...orders, order]);\n    addItem(order);\n    itemCost = getPrice(order);\n    console.log(order);\n    close();\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(DialogShadow, {\n    onClick: close,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Dialog, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(DialogBanner, {\n    img: `${API}/product/photo/${openFood._id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(DialogBannerName, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, openFood.name)), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(QuantityInput, {\n    quantity: quantity,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }), hasToppings(openFood) && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }, \"Add Toppings:\"), /*#__PURE__*/React.createElement(Toppings, Object.assign({}, toppings, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }))), openFood.choices && /*#__PURE__*/React.createElement(Choices, {\n    openFood: openFood,\n    choiceRadio: choiceRadio,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 30\n    }\n  })), /*#__PURE__*/React.createElement(DialogFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ConfirmButton, {\n    onClick: isEditing ? editOrder : addToOrder,\n    disabled: openFood.choices && !choiceRadio.value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 5\n    }\n  }, isEditing ? `Update order` : `Add to order: `, formatPrice(getPrice(order))))));\n}\n\nexport function FoodDialog(props) {\n  if (!props.openFood) return null;\n  return /*#__PURE__*/React.createElement(FoodDialogContainer, Object.assign({}, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 12\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/KerrFamily/Desktop/FoodApp/src/FoodDialog/FoodDialog.js"],"names":["React","styled","FoodLabel","seaBlue","Title","formatPrice","QuantityInput","useQuantity","Toppings","useToppings","useChoice","Choices","addItem","API","Dialog","div","DialogShadow","DialogBanner","img","DialogBannerName","pricePerTopping","getPrice","order","quantity","price","toppings","filter","t","checked","length","DialogContent","DialogFooter","ConfirmButton","disabled","hasToppings","food","category","name","FoodDialogContainer","openFood","setOpenFood","setOrders","orders","choiceRadio","choice","isEditing","index","close","value","itemAllCost","itemCost","editOrder","newOrders","addToOrder","console","log","_id","choices","FoodDialog","props"],"mappings":"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","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport {FoodLabel} from \"../Menu/FoodGrid\";\nimport {seaBlue} from '../Styles/colors';\nimport {Title} from '../Styles/title';\nimport {formatPrice} from \"../Data/FoodData\";\nimport {QuantityInput} from \"./QuantityInput\";\nimport {useQuantity} from \"../Hooks/useQuantity\";\nimport {Toppings} from \"./Toppings\";\nimport {useToppings} from \"../Hooks/useToppings\";\nimport {useChoice} from \"../Hooks/useChoice\";\nimport {Choices} from \"./Choices\";\nimport {addItem} from \"../Cart/carthelper\";\nimport {API} from \"../config\";\n\nexport const Dialog = styled.div`\n    width: 500px;\n    background-color: white;\n    position: fixed;\n    top: 75px;\n    z-index: 5;\n    max-height: calc(100% - 100px);\n    left: calc(50% - 250px);\n    display: flex;\n    flex-direction: column;\n`;\nconst DialogShadow = styled.div`\n    position: fixed;\n    height: 100%;\n    width: 100%;\n    top: 0px;\n    background-color: black;\n    opacity: 0.7;\n    z-index: 4;\n`;\n\nconst DialogBanner = styled.div`\nmin-height: 200px;\nmargin-bottom: 20px;\n${({img}) => (img ? `background-image: url(${img});` : `min-height: 75px;`)}\nbackground-position: center;\nbackground-size: cover;\n`;\n\nconst DialogBannerName = styled(FoodLabel)`\n    font-size: 30px;\n    padding: 5px 40px;\n    top: ${({img}) => (img ? `100px` : `20px`)};\n`;\n\nconst pricePerTopping = 0.5;\n\nexport function getPrice(order){\n    return order.quantity * (order.price + order.toppings.filter(t => t.checked).length * pricePerTopping);\n}\n//overflow auto adds the scroll bar to the dialog content area if needed\nexport const DialogContent = styled.div`\noverflow: auto; \nmin-height: 100px;\npadding: 0px 40px;\npadding-bottom: 80px;\n`;\n\nexport const DialogFooter = styled.div`\nbox-shadow: 0px -2px 10px 0px grey;\nheight: 60px;\ndisplay: flex;\njustify-content: center;\n`;\n\nexport const ConfirmButton = styled(Title)`\nmargin: 10px;\ncolor: white;\nheight: 20px;\nborder-radius: 5px;\npadding: 10px;\ntext-align: center;\nwidth: 200px;\ncursor: pointer;\nbackground-color: ${seaBlue};\n${({disabled}) => disabled &&\n`\nopacity: .5;\nbackground-color: grey;\npointer-events: none;\n`}\n`;\n\nfunction hasToppings(food){\n    return food.category.name === 'Pizza';\n}\n\nfunction FoodDialogContainer({openFood, setOpenFood, setOrders, orders}){\n    const quantity = useQuantity (openFood && openFood.quantity);\n    const toppings = useToppings(openFood.toppings);\n    const choiceRadio = useChoice(openFood.choice);\n    const isEditing = openFood.index > -1;\n    \n\n    function close() {\n        setOpenFood();\n    }\n\n    \n    const order ={\n        ...openFood,\n        quantity: quantity.value,\n        toppings: toppings.toppings,\n        itemAllCost: itemCost,\n        choice: choiceRadio.value\n    };\n\n    function editOrder(){\n        const newOrders = [...orders];\n        newOrders[order.index] = order;\n        setOrders(newOrders);\n        close();\n    };\n\n    function addToOrder(){\n        setOrders([...orders, order]);\n        addItem(order);\n        itemCost = getPrice(order)\n        console.log(order);\n        close();\n    }\n    return (\n    <>\n    <DialogShadow onClick={close}/>\n    <Dialog> \n    <DialogBanner img={`${API}/product/photo/${openFood._id}`}>\n        <DialogBannerName>{openFood.name}</DialogBannerName>\n    </DialogBanner>\n    <DialogContent>\n        <QuantityInput quantity={quantity}/>\n        {hasToppings(openFood) && (\n        <>\n            <h3>Add Toppings:</h3>\n            <Toppings {...toppings}/>\n        </>)}\n        {openFood.choices && <Choices openFood={openFood} choiceRadio={choiceRadio}/>}\n        \n    </DialogContent>\n    <DialogFooter>\n    <ConfirmButton \n    onClick={isEditing ? editOrder : addToOrder} \n    disabled={openFood.choices && !choiceRadio.value}>\n        {isEditing ? `Update order` : `Add to order: `}{formatPrice(getPrice(order))}</ConfirmButton>\n    </DialogFooter>\n    </Dialog>\n    </>\n    );\n}\n\nexport function FoodDialog(props){\n    if(!props.openFood) return null;\n    return <FoodDialogContainer {...props}/>\n}"]},"metadata":{},"sourceType":"module"}